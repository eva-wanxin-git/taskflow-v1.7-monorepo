# âœ… æ¶æ„å¸ˆæ¥æ‰‹é¡¹ç›®æ£€æŸ¥æ¸…å•

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¶é—´**: 2025-11-18

---

## ğŸ¯ æ¶æ„å¸ˆæ¥æ‰‹æ–°é¡¹ç›®çš„æ ‡å‡†æµç¨‹

å½“ä½ è¢«ä»»å‘½ä¸ºæŸä¸ªé¡¹ç›®çš„æ¶æ„å¸ˆæ—¶ï¼Œ**ç¬¬ä¸€ä»¶äº‹**æ˜¯ä¸ºé¡¹ç›®åˆ†é…ç‹¬ç«‹ç«¯å£ã€‚

---

## ğŸ“ Step 0: ç«¯å£åˆ†é…ï¼ˆæœ€ä¼˜å…ˆï¼‰

### 0.1 è‡ªåŠ¨åˆ†é…ç«¯å£

**åœ¨å¼€å§‹åˆ†æé¡¹ç›®ä¹‹å‰ï¼Œå…ˆæ‰§è¡Œ**ï¼š

```python
# æ–¹å¼1ï¼šåœ¨Pythonä¸­
import sys
sys.path.insert(0, "path/to/taskflow/packages/shared-utils")
from port_manager import allocate_project_port

# ä¸ºé¡¹ç›®åˆ†é…ç«¯å£
port = allocate_project_port("MY_PROJECT")
print(f"âœ“ é¡¹ç›® MY_PROJECT åˆ†é…ç«¯å£: {port}")
```

**æˆ–ä½¿ç”¨å‘½ä»¤è¡Œ**ï¼š
```bash
# åœ¨ä»»åŠ¡æ‰€Flowç›®å½•ä¸­
cd taskflow-v1.7-monorepo
python -c "
from packages.shared_utils.port_manager import allocate_project_port
port = allocate_project_port('MY_PROJECT')
print(f'ç«¯å£: {port}')
"
```

### 0.2 è®°å½•ç«¯å£åˆ°é¡¹ç›®é…ç½®

**åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º** `.taskflow.yaml`:
```yaml
# ä»»åŠ¡æ‰€Â·Flowé…ç½®
taskflow:
  api_url: "http://localhost:{port}"  # ä½¿ç”¨åˆ†é…çš„ç«¯å£
  project_code: "MY_PROJECT"
  dashboard_port: {port}
  auto_sync: true

# é¡¹ç›®ä¿¡æ¯
project:
  name: "æˆ‘çš„é¡¹ç›®"
  description: "é¡¹ç›®æè¿°"
  repo_url: "https://github.com/xxx/my-project"
```

### 0.3 åœ¨ä»»åŠ¡æ¿ä¸­å£°æ˜ç«¯å£

**åœ¨`docs/tasks/task-board.md`å¼€å¤´æ·»åŠ **ï¼š
```markdown
**ğŸ“ ç«¯å£ä¿¡æ¯**:
- **Dashboardç«¯å£**: {port}ï¼ˆè‡ªåŠ¨åˆ†é…ï¼‰
- **è®¿é—®åœ°å€**: http://localhost:{port}
- **ç«¯å£èŒƒå›´**: 8870-8899ï¼ˆä»»åŠ¡æ‰€Flowä¸“ç”¨ï¼‰
- **ç«¯å£ç®¡ç†**: é€šè¿‡PortManagerè‡ªåŠ¨åˆ†é…ï¼Œé¿å…å†²çª
```

---

## ğŸ“ Step 1-4: æ­£å¸¸çš„æ¶æ„å¸ˆæµç¨‹

[ç»§ç»­æ‰§è¡Œarchitect-system-promptä¸­çš„æ ‡å‡†æµç¨‹]

1. è½»é‡æ‰«æ
2. æ·±åº¦å®¡æŸ¥
3. ç”Ÿæˆ4ä»½æ–‡æ¡£
4. æ‹†è§£ä»»åŠ¡

---

## ğŸ“ Step 5: æ‰“å¼€ä»»åŠ¡çœ‹æ¿ï¼ˆè®©ç”¨æˆ·çœ‹åˆ°ï¼‰

### ç”Ÿæˆå¹¶æ‰“å¼€HTMLä»»åŠ¡æ¿

**æ‰§è¡Œè„šæœ¬**ï¼š
```bash
cd taskflow-v1.7-monorepo
python open_task_board.py
```

**è„šæœ¬ä¼šè‡ªåŠ¨**ï¼š
1. âœ… ä¸ºé¡¹ç›®åˆ†é…/è·å–ç«¯å£
2. âœ… è¯»å–Markdownä»»åŠ¡æ¿
3. âœ… ç”ŸæˆHTMLç‰ˆæœ¬
4. âœ… åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€

**ç”¨æˆ·ç«‹å³å¯ä»¥çœ‹åˆ°**ï¼š
- é¡¹ç›®ç«¯å£ä¿¡æ¯
- ä»»åŠ¡è¿›åº¦ç»Ÿè®¡
- è¯¦ç»†ä»»åŠ¡åˆ—è¡¨
- ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»

---

## ğŸ”„ æ¶æ„å¸ˆæ¥æ‰‹é¡¹ç›®çš„å®Œæ•´Checklist

### âœ… å‰ç½®å·¥ä½œï¼ˆ5åˆ†é’Ÿï¼‰

- [ ] **åˆ†é…ç«¯å£** - `allocate_project_port("PROJECT_CODE")`
- [ ] **åˆ›å»ºé…ç½®** - ç”Ÿæˆ`.taskflow.yaml`
- [ ] **è®°å½•åˆ°æ–‡æ¡£** - åœ¨task-board.mdä¸­å£°æ˜ç«¯å£

### âœ… é¡¹ç›®åˆ†æï¼ˆ10-20åˆ†é’Ÿï¼‰

- [ ] **è½»é‡æ‰«æ** - ç›®å½•ç»“æ„ã€é…ç½®æ–‡ä»¶ã€README
- [ ] **æ·±åº¦å®¡æŸ¥** - 10-20ä¸ªæ ¸å¿ƒæ–‡ä»¶
- [ ] **ç”Ÿæˆæ–‡æ¡£** - inventory/review/refactor-plan/task-board

### âœ… ä»»åŠ¡æ‹†è§£ï¼ˆ5-10åˆ†é’Ÿï¼‰

- [ ] **æ•´ç†æ¸…å•** - âœ…å·²å®ç° ğŸŸ¡éƒ¨åˆ†å®ç° ğŸ”´é—®é¢˜ ğŸ§¹ä»»åŠ¡
- [ ] **åˆ›å»ºä»»åŠ¡** - æ‹†è§£ä¸ºå¯æ‰§è¡Œä»»åŠ¡
- [ ] **è®¾ç½®ä¼˜å…ˆçº§** - P0/P1/P2/P3

### âœ… åŒæ­¥å’Œå±•ç¤ºï¼ˆ2åˆ†é’Ÿï¼‰

- [ ] **æäº¤API** - `POST /api/architect/analysis`ï¼ˆå¦‚æœ‰ä»»åŠ¡æ‰€ï¼‰
- [ ] **æ‰“å¼€ä»»åŠ¡æ¿** - `python open_task_board.py`
- [ ] **ç”¨æˆ·ç¡®è®¤** - ç­‰å¾…ç”¨æˆ·æŸ¥çœ‹å’Œåé¦ˆ

---

## ğŸ“Š ç«¯å£åˆ†é…è§„åˆ™

### ç«¯å£èŒƒå›´
```
8870-8899: ä»»åŠ¡æ‰€Flowä¸“ç”¨ï¼ˆ30ä¸ªç«¯å£ï¼‰

8870: ä»»åŠ¡æ‰€Flowæœ¬èº«
8871: ç¬¬1ä¸ªæ¥å…¥é¡¹ç›®
8872: ç¬¬2ä¸ªæ¥å…¥é¡¹ç›®
...
8899: ç¬¬30ä¸ªæ¥å…¥é¡¹ç›®
```

### ç«¯å£çŠ¶æ€
- **active**: æ­£åœ¨ä½¿ç”¨
- **released**: å·²é‡Šæ”¾ï¼ˆå¯é‡æ–°åˆ†é…ï¼‰

### ç«¯å£é…ç½®æ–‡ä»¶
```
taskflow-v1.7-monorepo/config/ports.json

{
  "version": "1.0",
  "port_range": {"start": 8870, "end": 8899},
  "allocated_ports": {
    "TASKFLOW": {
      "port": 8870,
      "allocated_at": "2025-11-18T22:30:00",
      "status": "active"
    },
    "MY_PROJECT": {
      "port": 8871,
      "allocated_at": "2025-11-18T22:35:00",
      "status": "active"
    }
  }
}
```

---

## ğŸ› ï¸ å®ç”¨å‘½ä»¤

### æŸ¥çœ‹ç«¯å£åˆ†é…æƒ…å†µ
```bash
cd taskflow-v1.7-monorepo
python packages/shared-utils/port_manager.py
```

### ä¸ºé¡¹ç›®åˆ†é…ç«¯å£
```python
from packages.shared_utils.port_manager import allocate_project_port
port = allocate_project_port("MY_PROJECT")
```

### é‡Šæ”¾ç«¯å£
```python
from packages.shared_utils.port_manager import PortManager
manager = PortManager()
manager.release_port("OLD_PROJECT")
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. é¡¹ç›®å‘½åè§„èŒƒ
```
æ¨èï¼šå…¨å¤§å†™+ä¸‹åˆ’çº¿
- TASKFLOW
- MY_PROJECT
- LIBRECHAT_DESKTOP

é¿å…ï¼š
- my-projectï¼ˆè¿å­—ç¬¦ï¼‰
- MyProjectï¼ˆé©¼å³°ï¼‰
- æˆ‘çš„é¡¹ç›®ï¼ˆä¸­æ–‡ï¼‰
```

### 2. ç«¯å£æ£€æŸ¥æ—¶æœº
```
æ¥æ‰‹é¡¹ç›®æ—¶ï¼šç«‹å³åˆ†é…ç«¯å£
æ›´æ–°ä»»åŠ¡æ¿åï¼šç«‹å³æ‰“å¼€æµè§ˆå™¨
å®šæœŸæ£€æŸ¥ï¼šæ¯å‘¨æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…å†µ
```

### 3. ç«¯å£å†²çªå¤„ç†
```
å¦‚æœç«¯å£è¢«å ç”¨ï¼š
1. PortManagerä¼šè‡ªåŠ¨è·³è¿‡
2. åˆ†é…ä¸‹ä¸€ä¸ªå¯ç”¨ç«¯å£
3. è®°å½•åˆ°ports.json
4. æ›´æ–°task-board.md
```

---

**æ£€æŸ¥æ¸…å•ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-18  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

âœ… **æ¶æ„å¸ˆæ¥æ‰‹é¡¹ç›®çš„æ ‡å‡†åŒ–æµç¨‹ï¼**

