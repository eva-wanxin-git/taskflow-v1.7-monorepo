# ğŸ“Š ä»»åŠ¡æ‰€Â·Flow é¡¹ç›®äº‹ä»¶ç±»å‹ä½“ç³»è®¾è®¡

> **æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
> **åˆ›å»ºæ—¶é—´**: 2025-11-18  
> **è®¾è®¡è€…**: AIæ¶æ„å¸ˆ  
> **çŠ¶æ€**: âœ… è®¾è®¡å®Œæˆ

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [äº‹ä»¶ç±»å‹å®šä¹‰](#äº‹ä»¶ç±»å‹å®šä¹‰)
3. [äº‹ä»¶æ•°æ®ç»“æ„](#äº‹ä»¶æ•°æ®ç»“æ„)
4. [äº‹ä»¶ä¼˜å…ˆçº§ä½“ç³»](#äº‹ä»¶ä¼˜å…ˆçº§ä½“ç³»)
5. [äº‹ä»¶èšåˆè§„åˆ™](#äº‹ä»¶èšåˆè§„åˆ™)
6. [äº‹ä»¶è¿‡æ»¤è§„åˆ™](#äº‹ä»¶è¿‡æ»¤è§„åˆ™)
7. [å®ç°å»ºè®®](#å®ç°å»ºè®®)

---

## æ¦‚è¿°

### è®¾è®¡ç›®æ ‡

ä¸ºä»»åŠ¡æ‰€Â·Flowå»ºç«‹ç»Ÿä¸€çš„é¡¹ç›®äº‹ä»¶ä½“ç³»ï¼Œå®ç°ï¼š

1. **å…¨æµç¨‹è¿½è¸ª** - è®°å½•é¡¹ç›®ä»å¯åŠ¨åˆ°äº¤ä»˜çš„æ‰€æœ‰å…³é”®äº‹ä»¶
2. **æ™ºèƒ½åˆ†æ** - åŸºäºäº‹ä»¶æµåˆ†æé¡¹ç›®å¥åº·åº¦å’Œé£é™©
3. **å†³ç­–æ”¯æŒ** - ä¸ºAIæ¶æ„å¸ˆæä¾›æ•°æ®é©±åŠ¨çš„å†³ç­–ä¾æ®
4. **çŸ¥è¯†æ²‰æ·€** - äº‹ä»¶ä½œä¸ºé¡¹ç›®è®°å¿†çš„æ—¶é—´è½´

### è®¾è®¡åŸåˆ™

| åŸåˆ™ | è¯´æ˜ |
|------|------|
| **å®Œå¤‡æ€§** | è¦†ç›–ä»»åŠ¡ã€åŠŸèƒ½ã€é—®é¢˜ã€åä½œå…¨ç”Ÿå‘½å‘¨æœŸ |
| **å¯æ‰©å±•æ€§** | æ”¯æŒæ–°å¢äº‹ä»¶ç±»å‹ï¼Œä¸å½±å“ç°æœ‰ç³»ç»Ÿ |
| **æ ‡å‡†åŒ–** | ç»Ÿä¸€æ•°æ®ç»“æ„ï¼Œä¾¿äºåˆ†æå’Œå±•ç¤º |
| **è½»é‡çº§** | é¿å…è¿‡åº¦è®¾è®¡ï¼Œä¿æŒç®€æ´é«˜æ•ˆ |

### åº”ç”¨åœºæ™¯

1. **æ¶æ„å¸ˆDashboard** - å®æ—¶ç›‘æ§é¡¹ç›®åŠ¨æ€
2. **é¡¹ç›®è®°å¿†ç©ºé—´** - è‡ªåŠ¨è®°å½•å’Œå›æº¯
3. **é£é™©é¢„è­¦** - åŸºäºäº‹ä»¶æ¨¡å¼è¯†åˆ«é£é™©
4. **å›¢é˜Ÿåä½œ** - åŒæ­¥é¡¹ç›®çŠ¶æ€å˜åŒ–

---

## äº‹ä»¶ç±»å‹å®šä¹‰

### æ€»è§ˆ

å…±å®šä¹‰ **28ç§æ ¸å¿ƒäº‹ä»¶ç±»å‹**ï¼Œåˆ†ä¸º4å¤§ç±»ï¼š

| ç±»åˆ« | äº‹ä»¶æ•° | è¯´æ˜ |
|------|--------|------|
| ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ | 9ç§ | ä»»åŠ¡ä»åˆ›å»ºåˆ°å®Œæˆçš„å…¨æµç¨‹ |
| åŠŸèƒ½ç”Ÿå‘½å‘¨æœŸ | 5ç§ | åŠŸèƒ½ä»è®¾è®¡åˆ°ä¸Šçº¿çš„è¿‡ç¨‹ |
| é—®é¢˜ç”Ÿå‘½å‘¨æœŸ | 6ç§ | é—®é¢˜ä»å‘ç°åˆ°è§£å†³çš„é—­ç¯ |
| åä½œäº‹ä»¶ | 8ç§ | å›¢é˜Ÿåä½œå’Œå¤–éƒ¨äº¤äº’ |

---

### 1ï¸âƒ£ ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ (9ç§)

#### 1.1 TASK_CREATED - ä»»åŠ¡åˆ›å»º

**è§¦å‘æ—¶æœº**: æ–°ä»»åŠ¡è¢«æ·»åŠ åˆ°ä»»åŠ¡çœ‹æ¿

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€æ ‡é¢˜ã€ä¼˜å…ˆçº§
- åˆ›å»ºè€…ï¼ˆæ¶æ„å¸ˆ/PM AI/å…¨æ ˆå·¥ç¨‹å¸ˆï¼‰
- é¢„ä¼°å·¥æ—¶ã€ä¾èµ–å…³ç³»

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_CREATED",
  "task_id": "TASK-C.1",
  "title": "åˆ›å»ºFastAPIä¸»åº”ç”¨å…¥å£",
  "priority": "P0",
  "estimated_hours": 2.0,
  "created_by": "architect",
  "dependencies": []
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 1.2 TASK_ASSIGNED - ä»»åŠ¡åˆ†é…

**è§¦å‘æ—¶æœº**: ä»»åŠ¡è¢«åˆ†é…ç»™æ‰§è¡Œè€…

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€è¢«åˆ†é…è€…
- åˆ†é…åŸå› ï¼ˆèƒ½åŠ›åŒ¹é…/è´Ÿè½½å‡è¡¡ï¼‰

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_ASSIGNED",
  "task_id": "TASK-C.1",
  "assigned_to": "fullstack-engineer",
  "reason": "capability_match",
  "assigned_by": "architect"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 1.3 TASK_STARTED - ä»»åŠ¡å¼€å§‹

**è§¦å‘æ—¶æœº**: æ‰§è¡Œè€…å¼€å§‹å®ç°ä»»åŠ¡ï¼ˆçŠ¶æ€: PENDING â†’ IN_PROGRESSï¼‰

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€å®é™…å¼€å§‹æ—¶é—´
- å·¥ç¨‹å¸ˆç¡®è®¤çš„å·¥ä½œè®¡åˆ’

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_STARTED",
  "task_id": "TASK-C.1",
  "started_by": "fullstack-engineer",
  "planned_completion": "2025-11-18T12:00:00",
  "work_plan": "1. åˆ›å»ºmain.py 2. é…ç½®CORS 3. æ³¨å†Œè·¯ç”±"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 1.4 TASK_BLOCKED - ä»»åŠ¡é˜»å¡

**è§¦å‘æ—¶æœº**: ä»»åŠ¡å› å¤–éƒ¨ä¾èµ–æˆ–æŠ€æœ¯é—®é¢˜æ— æ³•ç»§ç»­ï¼ˆçŠ¶æ€: IN_PROGRESS â†’ BLOCKEDï¼‰

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€é˜»å¡åŸå› 
- éœ€è¦çš„æ”¯æŒã€é¢„è®¡æ¢å¤æ—¶é—´

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_BLOCKED",
  "task_id": "TASK-C.2",
  "blocked_reason": "dependency_not_ready",
  "blocking_task": "TASK-C.1",
  "estimated_unblock": "2025-11-18T14:00:00"
}
```

**ä¼˜å…ˆçº§**: Highï¼ˆP0ä»»åŠ¡ï¼‰/ Mediumï¼ˆå…¶ä»–ï¼‰

---

#### 1.5 TASK_UNBLOCKED - ä»»åŠ¡è§£é™¤é˜»å¡

**è§¦å‘æ—¶æœº**: é˜»å¡æ¡ä»¶è§£é™¤ï¼ˆçŠ¶æ€: BLOCKED â†’ IN_PROGRESSï¼‰

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€è§£é™¤åŸå› 

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_UNBLOCKED",
  "task_id": "TASK-C.2",
  "unblock_reason": "dependency_completed",
  "unblocked_by": "system"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 1.6 TASK_SUBMITTED - ä»»åŠ¡æäº¤å®¡æŸ¥

**è§¦å‘æ—¶æœº**: æ‰§è¡Œè€…å®Œæˆå®ç°ï¼Œæäº¤ç»™æ¶æ„å¸ˆå®¡æŸ¥ï¼ˆçŠ¶æ€: IN_PROGRESS â†’ REVIEWï¼‰

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€å®é™…å®Œæˆæ—¶é—´
- å®ŒæˆæŠ¥å‘Šæ‘˜è¦ã€ä¿®æ”¹æ–‡ä»¶æ¸…å•

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_SUBMITTED",
  "task_id": "TASK-C.1",
  "submitted_by": "fullstack-engineer",
  "actual_hours": 2.5,
  "files_modified": ["apps/api/src/main.py"],
  "completion_summary": "å·²å®ç°FastAPIä¸»åº”ç”¨ï¼Œé€šè¿‡å¥åº·æ£€æŸ¥"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 1.7 TASK_REVIEWED - ä»»åŠ¡å®¡æŸ¥å®Œæˆ

**è§¦å‘æ—¶æœº**: æ¶æ„å¸ˆå®Œæˆä»£ç å®¡æŸ¥

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€å®¡æŸ¥ç»“æœï¼ˆé€šè¿‡/éœ€ä¿®æ”¹ï¼‰
- å®¡æŸ¥è¯„åˆ†ã€åé¦ˆæ„è§

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_REVIEWED",
  "task_id": "TASK-C.1",
  "reviewed_by": "architect",
  "result": "approved",
  "score": 95,
  "feedback": "ä»£ç è´¨é‡ä¼˜ç§€ï¼Œæ—¥å¿—è¾“å‡ºæ¸…æ™°"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 1.8 TASK_COMPLETED - ä»»åŠ¡å®Œæˆ

**è§¦å‘æ—¶æœº**: ä»»åŠ¡é€šè¿‡å®¡æŸ¥ï¼Œæ­£å¼å®Œæˆï¼ˆçŠ¶æ€: REVIEW â†’ COMPLETEDï¼‰

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€å®Œæˆæ—¶é—´
- æœ€ç»ˆå·¥æ—¶ã€è´¨é‡è¯„åˆ†

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_COMPLETED",
  "task_id": "TASK-C.1",
  "completed_at": "2025-11-18T11:30:00",
  "total_hours": 2.5,
  "quality_score": 95
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 1.9 TASK_CANCELLED - ä»»åŠ¡å–æ¶ˆ

**è§¦å‘æ—¶æœº**: ä»»åŠ¡å› éœ€æ±‚å˜æ›´æˆ–ä¼˜å…ˆçº§è°ƒæ•´è¢«å–æ¶ˆ

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€å–æ¶ˆåŸå› 
- å–æ¶ˆå†³ç­–è€…

**ç¤ºä¾‹**:
```json
{
  "event_type": "TASK_CANCELLED",
  "task_id": "TASK-D.3",
  "cancelled_by": "architect",
  "reason": "requirement_changed",
  "explanation": "å†³å®šå»¶åè¿ç§»ï¼Œèšç„¦æ ¸å¿ƒåŠŸèƒ½"
}
```

**ä¼˜å…ˆçº§**: Low

---

### 2ï¸âƒ£ åŠŸèƒ½ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ (5ç§)

#### 2.1 FEATURE_PROPOSED - åŠŸèƒ½ææ¡ˆ

**è§¦å‘æ—¶æœº**: æ–°åŠŸèƒ½éœ€æ±‚è¢«æå‡º

**å…³é”®æ•°æ®**:
- åŠŸèƒ½IDã€æ ‡é¢˜ã€æè¿°
- ææ¡ˆè€…ã€ä¸šåŠ¡ä»·å€¼

**ç¤ºä¾‹**:
```json
{
  "event_type": "FEATURE_PROPOSED",
  "feature_id": "FEAT-001",
  "title": "é¡¹ç›®äº‹ä»¶æµç³»ç»Ÿ",
  "proposed_by": "product_manager",
  "business_value": "å®æ—¶ç›‘æ§é¡¹ç›®è¿›å±•ï¼Œæå‡å†³ç­–æ•ˆç‡",
  "estimated_effort": "8 hours"
}
```

**ä¼˜å…ˆçº§**: Low

---

#### 2.2 FEATURE_APPROVED - åŠŸèƒ½æ‰¹å‡†

**è§¦å‘æ—¶æœº**: åŠŸèƒ½ææ¡ˆé€šè¿‡è¯„å®¡ï¼Œè¿›å…¥å¼€å‘è®¡åˆ’

**å…³é”®æ•°æ®**:
- åŠŸèƒ½IDã€æ‰¹å‡†è€…
- ç›®æ ‡ç‰ˆæœ¬ã€é¢„è®¡å®Œæˆæ—¶é—´

**ç¤ºä¾‹**:
```json
{
  "event_type": "FEATURE_APPROVED",
  "feature_id": "FEAT-001",
  "approved_by": "architect",
  "target_version": "v1.8",
  "planned_completion": "2025-11-25"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 2.3 FEATURE_IN_PROGRESS - åŠŸèƒ½å¼€å‘ä¸­

**è§¦å‘æ—¶æœº**: åŠŸèƒ½çš„é¦–ä¸ªä»»åŠ¡å¼€å§‹æ‰§è¡Œ

**å…³é”®æ•°æ®**:
- åŠŸèƒ½IDã€å…³è”ä»»åŠ¡åˆ—è¡¨
- å½“å‰è¿›åº¦

**ç¤ºä¾‹**:
```json
{
  "event_type": "FEATURE_IN_PROGRESS",
  "feature_id": "FEAT-001",
  "tasks": ["TASK-E.1", "TASK-E.2"],
  "progress": "20%"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 2.4 FEATURE_COMPLETED - åŠŸèƒ½å®Œæˆ

**è§¦å‘æ—¶æœº**: åŠŸèƒ½çš„æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼ŒåŠŸèƒ½æµ‹è¯•é€šè¿‡

**å…³é”®æ•°æ®**:
- åŠŸèƒ½IDã€å®Œæˆæ—¶é—´
- è´¨é‡æŒ‡æ ‡ï¼ˆæµ‹è¯•è¦†ç›–ç‡ã€æ€§èƒ½æŒ‡æ ‡ï¼‰

**ç¤ºä¾‹**:
```json
{
  "event_type": "FEATURE_COMPLETED",
  "feature_id": "FEAT-001",
  "completed_at": "2025-11-25T18:00:00",
  "test_coverage": "85%",
  "performance_ok": true
}
```

**ä¼˜å…ˆçº§**: High

---

#### 2.5 FEATURE_DEPLOYED - åŠŸèƒ½éƒ¨ç½²

**è§¦å‘æ—¶æœº**: åŠŸèƒ½éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

**å…³é”®æ•°æ®**:
- åŠŸèƒ½IDã€éƒ¨ç½²ç¯å¢ƒ
- éƒ¨ç½²ç‰ˆæœ¬ã€å¥åº·æ£€æŸ¥ç»“æœ

**ç¤ºä¾‹**:
```json
{
  "event_type": "FEATURE_DEPLOYED",
  "feature_id": "FEAT-001",
  "environment": "production",
  "version": "v1.8.0",
  "health_check": "passed"
}
```

**ä¼˜å…ˆçº§**: Critical

---

### 3ï¸âƒ£ é—®é¢˜ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ (6ç§)

#### 3.1 ISSUE_DISCOVERED - é—®é¢˜å‘ç°

**è§¦å‘æ—¶æœº**: æ–°é—®é¢˜è¢«è¯†åˆ«å’Œè®°å½•

**å…³é”®æ•°æ®**:
- é—®é¢˜IDã€ä¸¥é‡ç¨‹åº¦ï¼ˆcritical/high/medium/lowï¼‰
- å‘ç°è€…ã€å½±å“èŒƒå›´

**ç¤ºä¾‹**:
```json
{
  "event_type": "ISSUE_DISCOVERED",
  "issue_id": "ISS-001",
  "severity": "high",
  "title": "Dashboard Tabåˆ‡æ¢å¤±è´¥",
  "discovered_by": "tester",
  "impact": "æ‰€æœ‰Tabæ¨¡å—ä¸å¯ç”¨"
}
```

**ä¼˜å…ˆçº§**: Criticalï¼ˆä¸¥é‡ç¨‹åº¦high+ï¼‰/ Highï¼ˆmediumï¼‰/ Lowï¼ˆlowï¼‰

---

#### 3.2 ISSUE_ASSIGNED - é—®é¢˜åˆ†é…

**è§¦å‘æ—¶æœº**: é—®é¢˜è¢«åˆ†é…ç»™å·¥ç¨‹å¸ˆè§£å†³

**å…³é”®æ•°æ®**:
- é—®é¢˜IDã€è¢«åˆ†é…è€…

**ç¤ºä¾‹**:
```json
{
  "event_type": "ISSUE_ASSIGNED",
  "issue_id": "ISS-001",
  "assigned_to": "fullstack-engineer"
}
```

**ä¼˜å…ˆçº§**: ç»§æ‰¿é—®é¢˜ä¼˜å…ˆçº§

---

#### 3.3 ISSUE_IN_PROGRESS - é—®é¢˜å¤„ç†ä¸­

**è§¦å‘æ—¶æœº**: å·¥ç¨‹å¸ˆå¼€å§‹æ’æŸ¥å’Œä¿®å¤é—®é¢˜

**å…³é”®æ•°æ®**:
- é—®é¢˜IDã€åˆæ­¥è¯Šæ–­

**ç¤ºä¾‹**:
```json
{
  "event_type": "ISSUE_IN_PROGRESS",
  "issue_id": "ISS-001",
  "diagnosis": "JavaScriptæ¨¡æ¿å­—ç¬¦ä¸²å†…åå¼•å·æœªè½¬ä¹‰"
}
```

**ä¼˜å…ˆçº§**: ç»§æ‰¿é—®é¢˜ä¼˜å…ˆçº§

---

#### 3.4 ISSUE_SOLVED - é—®é¢˜è§£å†³

**è§¦å‘æ—¶æœº**: é—®é¢˜æ ¹å› ä¿®å¤ï¼Œç­‰å¾…éªŒè¯

**å…³é”®æ•°æ®**:
- é—®é¢˜IDã€è§£å†³æ–¹æ¡ˆæè¿°
- ä¿®æ”¹æ–‡ä»¶ã€ä¿®å¤å·¥æ—¶

**ç¤ºä¾‹**:
```json
{
  "event_type": "ISSUE_SOLVED",
  "issue_id": "ISS-001",
  "solution": "åœ¨templates.pyç¬¬4361è¡Œæ·»åŠ åæ–œæ è½¬ä¹‰",
  "files_modified": ["apps/dashboard/templates.py"],
  "time_spent": 1.5
}
```

**ä¼˜å…ˆçº§**: ç»§æ‰¿é—®é¢˜ä¼˜å…ˆçº§

---

#### 3.5 ISSUE_VERIFIED - é—®é¢˜éªŒè¯

**è§¦å‘æ—¶æœº**: ä¿®å¤é€šè¿‡æµ‹è¯•éªŒè¯

**å…³é”®æ•°æ®**:
- é—®é¢˜IDã€éªŒè¯ç»“æœ

**ç¤ºä¾‹**:
```json
{
  "event_type": "ISSUE_VERIFIED",
  "issue_id": "ISS-001",
  "verified_by": "architect",
  "verification_method": "æ‰‹åŠ¨æµ‹è¯•æ‰€æœ‰Tabåˆ‡æ¢"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 3.6 ISSUE_CLOSED - é—®é¢˜å…³é—­

**è§¦å‘æ—¶æœº**: é—®é¢˜å®Œå…¨è§£å†³å¹¶å½’æ¡£

**å…³é”®æ•°æ®**:
- é—®é¢˜IDã€å…³é—­æ—¶é—´
- æ€»è€—æ—¶ã€ç»éªŒæ•™è®­

**ç¤ºä¾‹**:
```json
{
  "event_type": "ISSUE_CLOSED",
  "issue_id": "ISS-001",
  "closed_at": "2025-11-18T15:00:00",
  "total_time": 2.0,
  "lessons_learned": "Python f-stringä¸­åµŒå¥—JavaScriptæ¨¡æ¿å­—ç¬¦ä¸²éœ€è½¬ä¹‰"
}
```

**ä¼˜å…ˆçº§**: Low

---

### 4ï¸âƒ£ åä½œäº‹ä»¶ (8ç§)

#### 4.1 ARCHITECT_HANDOVER - æ¶æ„å¸ˆäº¤æ¥

**è§¦å‘æ—¶æœº**: æ¶æ„å¸ˆTokenç”¨å°½ï¼Œç”Ÿæˆäº¤æ¥å¿«ç…§

**å…³é”®æ•°æ®**:
- é¡¹ç›®IDã€äº¤æ¥å¿«ç…§ID
- å½“å‰è¿›åº¦ã€æœªå®Œæˆä»»åŠ¡ã€é‡è¦æé†’

**ç¤ºä¾‹**:
```json
{
  "event_type": "ARCHITECT_HANDOVER",
  "project_id": "TASKFLOW",
  "snapshot_id": "handover_20251118_220000",
  "progress": "60%",
  "pending_tasks": ["TASK-C.1", "TASK-C.2"],
  "critical_notes": "Phase Céœ€ä¼˜å…ˆå®Œæˆ"
}
```

**ä¼˜å…ˆçº§**: High

---

#### 4.2 ARCHITECT_RESUME - æ–°æ¶æ„å¸ˆæ¥ç®¡

**è§¦å‘æ—¶æœº**: æ–°æ¶æ„å¸ˆä»å¿«ç…§æ¢å¤å·¥ä½œä¸Šä¸‹æ–‡

**å…³é”®æ•°æ®**:
- é¡¹ç›®IDã€å¿«ç…§ID
- æ–°æ¶æ„å¸ˆID

**ç¤ºä¾‹**:
```json
{
  "event_type": "ARCHITECT_RESUME",
  "project_id": "TASKFLOW",
  "snapshot_id": "handover_20251118_220000",
  "resumed_by": "architect_v2"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 4.3 CODE_REVIEW_REQUESTED - ä»£ç å®¡æŸ¥è¯·æ±‚

**è§¦å‘æ—¶æœº**: å·¥ç¨‹å¸ˆè¯·æ±‚æ¶æ„å¸ˆå®¡æŸ¥ä»£ç 

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€è¯·æ±‚è€…
- ä»£ç diffæ‘˜è¦

**ç¤ºä¾‹**:
```json
{
  "event_type": "CODE_REVIEW_REQUESTED",
  "task_id": "TASK-C.1",
  "requested_by": "fullstack-engineer",
  "files_changed": 3,
  "lines_added": 150,
  "lines_removed": 20
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 4.4 DECISION_RECORDED - æŠ€æœ¯å†³ç­–è®°å½•

**è§¦å‘æ—¶æœº**: é‡è¦æŠ€æœ¯å†³ç­–è¢«è®°å½•ä¸ºADR

**å…³é”®æ•°æ®**:
- å†³ç­–IDã€æ ‡é¢˜
- å†³ç­–å†…å®¹ã€å½±å“èŒƒå›´

**ç¤ºä¾‹**:
```json
{
  "event_type": "DECISION_RECORDED",
  "decision_id": "ADR-0001",
  "title": "é‡‡ç”¨Monorepoæ¶æ„",
  "decision": "ä½¿ç”¨å•ä»“åº“ç®¡ç†æ‰€æœ‰åŒ…",
  "impact": "project_structure"
}
```

**ä¼˜å…ˆçº§**: High

---

#### 4.5 KNOWLEDGE_CAPTURED - çŸ¥è¯†æ•è·

**è§¦å‘æ—¶æœº**: é—®é¢˜è§£å†³æ–¹æ¡ˆæˆ–ç»éªŒè¢«è®°å½•åˆ°çŸ¥è¯†åº“

**å…³é”®æ•°æ®**:
- çŸ¥è¯†IDã€ç±»åˆ«ï¼ˆarchitecture/pattern/guideï¼‰
- å…³è”é—®é¢˜/ä»»åŠ¡

**ç¤ºä¾‹**:
```json
{
  "event_type": "KNOWLEDGE_CAPTURED",
  "knowledge_id": "KB-001",
  "category": "guide",
  "title": "Python f-stringåµŒå¥—JavaScriptæ¨¡æ¿å­—ç¬¦ä¸²è½¬ä¹‰è§„åˆ™",
  "related_issue": "ISS-001"
}
```

**ä¼˜å…ˆçº§**: Low

---

#### 4.6 DEPENDENCY_ADDED - ä¾èµ–æ·»åŠ 

**è§¦å‘æ—¶æœº**: ä»»åŠ¡ä¹‹é—´å»ºç«‹æ–°çš„ä¾èµ–å…³ç³»

**å…³é”®æ•°æ®**:
- ä»»åŠ¡IDã€è¢«ä¾èµ–ä»»åŠ¡ID

**ç¤ºä¾‹**:
```json
{
  "event_type": "DEPENDENCY_ADDED",
  "task_id": "TASK-C.2",
  "depends_on": "TASK-C.1",
  "reason": "éœ€è¦FastAPIæœåŠ¡è¿è¡Œ"
}
```

**ä¼˜å…ˆçº§**: Medium

---

#### 4.7 MILESTONE_REACHED - é‡Œç¨‹ç¢‘è¾¾æˆ

**è§¦å‘æ—¶æœº**: é¡¹ç›®é˜¶æ®µæ€§ç›®æ ‡å®Œæˆ

**å…³é”®æ•°æ®**:
- é‡Œç¨‹ç¢‘IDã€å®Œæˆæ—¶é—´
- å®Œæˆä»»åŠ¡æ•°ã€è´¨é‡æŒ‡æ ‡

**ç¤ºä¾‹**:
```json
{
  "event_type": "MILESTONE_REACHED",
  "milestone_id": "Phase C",
  "milestone_name": "APIé›†æˆå®Œæˆ",
  "completed_at": "2025-11-19T18:00:00",
  "tasks_completed": 3,
  "overall_quality": "excellent"
}
```

**ä¼˜å…ˆçº§**: Critical

---

#### 4.8 RISK_IDENTIFIED - é£é™©è¯†åˆ«

**è§¦å‘æ—¶æœº**: ç³»ç»Ÿæˆ–äººå·¥è¯†åˆ«åˆ°é¡¹ç›®é£é™©

**å…³é”®æ•°æ®**:
- é£é™©IDã€é£é™©ç±»å‹ï¼ˆdelay/quality/technicalï¼‰
- å½±å“ç¨‹åº¦ã€ç¼“è§£æªæ–½

**ç¤ºä¾‹**:
```json
{
  "event_type": "RISK_IDENTIFIED",
  "risk_id": "RISK-001",
  "risk_type": "delay",
  "description": "3ä¸ªP0ä»»åŠ¡è¿ç»­é˜»å¡",
  "impact": "high",
  "mitigation": "è°ƒæ•´ä»»åŠ¡ä¼˜å…ˆçº§ï¼Œå¢åŠ èµ„æº"
}
```

**ä¼˜å…ˆçº§**: Critical

---

## äº‹ä»¶æ•°æ®ç»“æ„

### ç»Ÿä¸€äº‹ä»¶åŸºç±»

æ‰€æœ‰äº‹ä»¶éƒ½ç»§æ‰¿ä»¥ä¸‹åŸºç¡€ç»“æ„ï¼š

```python
@dataclass
class BaseEvent:
    """äº‹ä»¶åŸºç±»"""
    # ===== å¿…å¡«å­—æ®µ =====
    event_id: str                    # äº‹ä»¶å”¯ä¸€ID (UUID)
    event_type: str                  # äº‹ä»¶ç±»å‹ (28ç§ä¹‹ä¸€)
    project_id: str                  # é¡¹ç›®ID
    timestamp: datetime              # äº‹ä»¶å‘ç”Ÿæ—¶é—´
    
    # ===== ä¸Šä¸‹æ–‡å­—æ®µ =====
    actor: str                       # è§¦å‘è€… (architect/engineer/system)
    actor_type: str                  # è§¦å‘è€…ç±»å‹ (human/ai/system)
    
    # ===== ä¼˜å…ˆçº§å­—æ®µ =====
    priority: str                    # äº‹ä»¶ä¼˜å…ˆçº§ (critical/high/medium/low)
    
    # ===== å…³è”å­—æ®µ =====
    related_entities: Dict[str, str] # å…³è”å®ä½“ {"task_id": "TASK-C.1", ...}
    
    # ===== å…ƒæ•°æ®å­—æ®µ =====
    metadata: Dict[str, Any]         # æ‰©å±•å…ƒæ•°æ® (å…·ä½“äº‹ä»¶çš„ç‰¹æœ‰å­—æ®µ)
    tags: List[str]                  # æ ‡ç­¾ (ç”¨äºåˆ†ç±»å’Œæ£€ç´¢)
    
    # ===== è¿½æº¯å­—æ®µ =====
    parent_event_id: Optional[str]   # çˆ¶äº‹ä»¶ID (ç”¨äºäº‹ä»¶é“¾)
    correlation_id: Optional[str]    # å…³è”ID (åŒä¸€æµç¨‹çš„äº‹ä»¶)
```

### äº‹ä»¶JSONç¤ºä¾‹

```json
{
  "event_id": "evt_20251118_120001",
  "event_type": "TASK_STARTED",
  "project_id": "TASKFLOW",
  "timestamp": "2025-11-18T12:00:01Z",
  
  "actor": "fullstack-engineer",
  "actor_type": "ai",
  
  "priority": "medium",
  
  "related_entities": {
    "task_id": "TASK-C.1",
    "component_id": "api"
  },
  
  "metadata": {
    "planned_completion": "2025-11-18T14:00:00Z",
    "work_plan": "1. åˆ›å»ºmain.py 2. é…ç½®CORS 3. æ³¨å†Œè·¯ç”±"
  },
  
  "tags": ["backend", "api", "phase-c"],
  
  "parent_event_id": "evt_20251118_100001",
  "correlation_id": "flow_task_c1"
}
```

---

## äº‹ä»¶ä¼˜å…ˆçº§ä½“ç³»

### ä¼˜å…ˆçº§å®šä¹‰

| ä¼˜å…ˆçº§ | è¯´æ˜ | å“åº”æ—¶é—´ | é€šçŸ¥æ–¹å¼ |
|--------|------|---------|---------|
| **Critical** | é¡¹ç›®çº§å…³é”®äº‹ä»¶ | ç«‹å³ | å®æ—¶æ¨é€ + é‚®ä»¶ |
| **High** | é‡è¦äº‹ä»¶ï¼Œéœ€å¿«é€Ÿå“åº” | 30åˆ†é’Ÿå†… | å®æ—¶æ¨é€ |
| **Medium** | æ­£å¸¸äº‹ä»¶ | 2å°æ—¶å†… | Dashboardæ˜¾ç¤º |
| **Low** | ä¸€èˆ¬ä¿¡æ¯ | æ— è¦æ±‚ | æ—¥å¿—è®°å½• |

### ä¼˜å…ˆçº§çŸ©é˜µ

| äº‹ä»¶ç±»å‹ | é»˜è®¤ä¼˜å…ˆçº§ | åŠ¨æ€è°ƒæ•´è§„åˆ™ |
|---------|-----------|-------------|
| TASK_BLOCKED | High | è‹¥ä¸ºP0ä»»åŠ¡ â†’ Critical |
| ISSUE_DISCOVERED | ç»§æ‰¿ä¸¥é‡ç¨‹åº¦ | Criticalé—®é¢˜ â†’ Criticaläº‹ä»¶ |
| MILESTONE_REACHED | Critical | - |
| RISK_IDENTIFIED | Critical | - |
| FEATURE_DEPLOYED | Critical | - |
| ARCHITECT_HANDOVER | High | - |
| TASK_CREATED | Medium | - |
| TASK_COMPLETED | Medium | è‹¥ä¸ºå…³é”®è·¯å¾„ä»»åŠ¡ â†’ High |
| KNOWLEDGE_CAPTURED | Low | - |

### ä¼˜å…ˆçº§è®¡ç®—ç®—æ³•

```python
def calculate_event_priority(
    event_type: str,
    related_task: Optional[Task] = None,
    related_issue: Optional[Issue] = None
) -> str:
    """åŠ¨æ€è®¡ç®—äº‹ä»¶ä¼˜å…ˆçº§"""
    
    # 1. å›ºå®šCriticaläº‹ä»¶
    if event_type in ["MILESTONE_REACHED", "RISK_IDENTIFIED", "FEATURE_DEPLOYED"]:
        return "critical"
    
    # 2. ä»»åŠ¡ç›¸å…³äº‹ä»¶
    if related_task:
        if event_type == "TASK_BLOCKED" and related_task.priority == "P0":
            return "critical"
        if event_type == "TASK_COMPLETED" and related_task.is_critical_path:
            return "high"
    
    # 3. é—®é¢˜ç›¸å…³äº‹ä»¶
    if related_issue:
        severity_map = {
            "critical": "critical",
            "high": "high",
            "medium": "medium",
            "low": "low"
        }
        return severity_map.get(related_issue.severity, "medium")
    
    # 4. ä½¿ç”¨é»˜è®¤ä¼˜å…ˆçº§
    default_priorities = {
        "ARCHITECT_HANDOVER": "high",
        "DECISION_RECORDED": "high",
        "FEATURE_APPROVED": "medium",
        "TASK_CREATED": "medium",
        # ... æ›´å¤šæ˜ å°„
    }
    return default_priorities.get(event_type, "medium")
```

---

## äº‹ä»¶èšåˆè§„åˆ™

### èšåˆåœºæ™¯

#### åœºæ™¯1: åŒä»»åŠ¡è¿ç»­äº‹ä»¶èšåˆ

**è§„åˆ™**: åŒä¸€ä»»åŠ¡åœ¨10åˆ†é’Ÿå†…çš„è¿ç»­çŠ¶æ€å˜æ›´ï¼Œèšåˆä¸ºå•ä¸ªäº‹ä»¶æµ

**ç¤ºä¾‹**:
```
åŸå§‹äº‹ä»¶:
- 12:00 TASK_CREATED (TASK-C.1)
- 12:01 TASK_ASSIGNED (TASK-C.1)
- 12:05 TASK_STARTED (TASK-C.1)

èšåˆå:
- 12:05 TASK_FLOW (TASK-C.1: created â†’ assigned â†’ started)
```

**é€‚ç”¨**: Dashboardå®æ—¶ç›‘æ§ï¼Œé¿å…ä¿¡æ¯è¿‡è½½

---

#### åœºæ™¯2: æ‰¹é‡å®Œæˆèšåˆ

**è§„åˆ™**: 1å°æ—¶å†…å®Œæˆâ‰¥3ä¸ªä»»åŠ¡ï¼Œèšåˆä¸º"æ‰¹é‡å®Œæˆ"äº‹ä»¶

**ç¤ºä¾‹**:
```
åŸå§‹äº‹ä»¶:
- 14:00 TASK_COMPLETED (TASK-C.1)
- 14:30 TASK_COMPLETED (TASK-C.2)
- 14:50 TASK_COMPLETED (TASK-C.3)

èšåˆå:
- 14:50 BATCH_TASKS_COMPLETED (3 tasks in Phase C)
```

**é€‚ç”¨**: é¡¹ç›®è¿›åº¦æŠ¥å‘Š

---

#### åœºæ™¯3: é—®é¢˜èšåˆ

**è§„åˆ™**: ç›¸åŒç»„ä»¶åœ¨24å°æ—¶å†…å‘ç°â‰¥3ä¸ªé—®é¢˜ï¼Œèšåˆä¸º"è´¨é‡é£é™©"

**ç¤ºä¾‹**:
```
åŸå§‹äº‹ä»¶:
- 09:00 ISSUE_DISCOVERED (Dashboardæ¨¡å—)
- 15:00 ISSUE_DISCOVERED (Dashboardæ¨¡å—)
- 21:00 ISSUE_DISCOVERED (Dashboardæ¨¡å—)

èšåˆå:
- 21:00 QUALITY_RISK_DETECTED (Dashboardæ¨¡å—: 24hå†…3ä¸ªé—®é¢˜)
```

**é€‚ç”¨**: é£é™©é¢„è­¦

---

#### åœºæ™¯4: åŠŸèƒ½é‡Œç¨‹ç¢‘èšåˆ

**è§„åˆ™**: åŠŸèƒ½çš„æ‰€æœ‰å­äº‹ä»¶èšåˆä¸ºè¿›åº¦è§†å›¾

**ç¤ºä¾‹**:
```
åŸå§‹äº‹ä»¶:
- Day 1: FEATURE_APPROVED (FEAT-001)
- Day 2: FEATURE_IN_PROGRESS (FEAT-001, 20%)
- Day 3: FEATURE_IN_PROGRESS (FEAT-001, 60%)
- Day 4: FEATURE_COMPLETED (FEAT-001)

èšåˆå:
- Day 4: FEATURE_LIFECYCLE (FEAT-001: 4å¤©å®Œæˆï¼Œè¿›åº¦ç¬¦åˆé¢„æœŸ)
```

**é€‚ç”¨**: åŠŸèƒ½äº¤ä»˜åˆ†æ

---

### èšåˆç®—æ³•

```python
class EventAggregator:
    """äº‹ä»¶èšåˆå™¨"""
    
    def aggregate_task_flow(
        self,
        events: List[BaseEvent],
        time_window_minutes: int = 10
    ) -> Optional[BaseEvent]:
        """èšåˆä»»åŠ¡æµäº‹ä»¶"""
        
        # 1. æŒ‰task_idåˆ†ç»„
        task_events = {}
        for event in events:
            task_id = event.related_entities.get("task_id")
            if task_id:
                task_events.setdefault(task_id, []).append(event)
        
        # 2. å¯¹æ¯ä¸ªä»»åŠ¡æ£€æŸ¥æ—¶é—´çª—å£
        aggregated = []
        for task_id, task_event_list in task_events.items():
            # æ’åº
            sorted_events = sorted(task_event_list, key=lambda e: e.timestamp)
            
            # æ£€æŸ¥æ—¶é—´å·®
            if len(sorted_events) >= 2:
                time_diff = (sorted_events[-1].timestamp - sorted_events[0].timestamp).total_seconds()
                if time_diff <= time_window_minutes * 60:
                    # æ»¡è¶³èšåˆæ¡ä»¶
                    aggregated.append(self._create_flow_event(sorted_events))
        
        return aggregated
    
    def _create_flow_event(self, events: List[BaseEvent]) -> BaseEvent:
        """åˆ›å»ºèšåˆäº‹ä»¶"""
        return BaseEvent(
            event_id=f"flow_{events[-1].event_id}",
            event_type="TASK_FLOW",
            project_id=events[0].project_id,
            timestamp=events[-1].timestamp,
            actor=events[-1].actor,
            actor_type=events[-1].actor_type,
            priority="medium",
            related_entities=events[-1].related_entities,
            metadata={
                "flow": [e.event_type for e in events],
                "duration_seconds": (events[-1].timestamp - events[0].timestamp).total_seconds(),
                "original_event_count": len(events)
            },
            tags=["aggregated", "task_flow"]
        )
```

---

## äº‹ä»¶è¿‡æ»¤è§„åˆ™

### è¿‡æ»¤ç»´åº¦

#### 1. æŒ‰ä¼˜å…ˆçº§è¿‡æ»¤

```python
# Dashboardå®æ—¶ç›‘æ§ï¼šåªæ˜¾ç¤ºHigh+
filter_events(min_priority="high")

# æ—¥å¿—å®¡è®¡ï¼šæ˜¾ç¤ºå…¨éƒ¨
filter_events(min_priority="low")
```

---

#### 2. æŒ‰æ—¶é—´è¿‡æ»¤

```python
# æœ€è¿‘24å°æ—¶
filter_events(time_range="24h")

# æŒ‡å®šæ—¥æœŸèŒƒå›´
filter_events(start_date="2025-11-18", end_date="2025-11-19")
```

---

#### 3. æŒ‰äº‹ä»¶ç±»å‹è¿‡æ»¤

```python
# åªçœ‹ä»»åŠ¡äº‹ä»¶
filter_events(event_types=["TASK_*"])

# åªçœ‹é—®é¢˜å’Œé£é™©
filter_events(event_types=["ISSUE_*", "RISK_*"])
```

---

#### 4. æŒ‰é¡¹ç›®/ç»„ä»¶è¿‡æ»¤

```python
# ç‰¹å®šé¡¹ç›®
filter_events(project_id="TASKFLOW")

# ç‰¹å®šç»„ä»¶
filter_events(component_id="api")
```

---

#### 5. æŒ‰è§¦å‘è€…è¿‡æ»¤

```python
# æ¶æ„å¸ˆçš„æ“ä½œ
filter_events(actor="architect")

# AIè§¦å‘çš„äº‹ä»¶
filter_events(actor_type="ai")
```

---

#### 6. æŒ‰æ ‡ç­¾è¿‡æ»¤

```python
# åç«¯ç›¸å…³
filter_events(tags=["backend"])

# Phase Cç›¸å…³
filter_events(tags=["phase-c"])
```

---

### è¿‡æ»¤å™¨å®ç°

```python
class EventFilter:
    """äº‹ä»¶è¿‡æ»¤å™¨"""
    
    def __init__(self, events: List[BaseEvent]):
        self.events = events
    
    def filter(
        self,
        min_priority: Optional[str] = None,
        event_types: Optional[List[str]] = None,
        time_range: Optional[str] = None,
        project_id: Optional[str] = None,
        component_id: Optional[str] = None,
        actor: Optional[str] = None,
        actor_type: Optional[str] = None,
        tags: Optional[List[str]] = None
    ) -> List[BaseEvent]:
        """å¤šæ¡ä»¶è¿‡æ»¤"""
        
        result = self.events
        
        # ä¼˜å…ˆçº§è¿‡æ»¤
        if min_priority:
            priority_order = {"low": 0, "medium": 1, "high": 2, "critical": 3}
            min_level = priority_order[min_priority]
            result = [e for e in result if priority_order[e.priority] >= min_level]
        
        # äº‹ä»¶ç±»å‹è¿‡æ»¤ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰
        if event_types:
            import fnmatch
            result = [
                e for e in result
                if any(fnmatch.fnmatch(e.event_type, pattern) for pattern in event_types)
            ]
        
        # æ—¶é—´èŒƒå›´è¿‡æ»¤
        if time_range:
            cutoff = self._parse_time_range(time_range)
            result = [e for e in result if e.timestamp >= cutoff]
        
        # é¡¹ç›®è¿‡æ»¤
        if project_id:
            result = [e for e in result if e.project_id == project_id]
        
        # ç»„ä»¶è¿‡æ»¤
        if component_id:
            result = [
                e for e in result
                if e.related_entities.get("component_id") == component_id
            ]
        
        # è§¦å‘è€…è¿‡æ»¤
        if actor:
            result = [e for e in result if e.actor == actor]
        if actor_type:
            result = [e for e in result if e.actor_type == actor_type]
        
        # æ ‡ç­¾è¿‡æ»¤ï¼ˆANYåŒ¹é…ï¼‰
        if tags:
            result = [
                e for e in result
                if any(tag in e.tags for tag in tags)
            ]
        
        return result
    
    def _parse_time_range(self, time_range: str) -> datetime:
        """è§£ææ—¶é—´èŒƒå›´"""
        from datetime import datetime, timedelta
        
        now = datetime.now()
        
        if time_range.endswith("h"):
            hours = int(time_range[:-1])
            return now - timedelta(hours=hours)
        elif time_range.endswith("d"):
            days = int(time_range[:-1])
            return now - timedelta(days=days)
        else:
            raise ValueError(f"Invalid time_range: {time_range}")
```

---

### é¢„è®¾è¿‡æ»¤æ¨¡æ¿

| æ¨¡æ¿åç§° | è¯´æ˜ | è¿‡æ»¤æ¡ä»¶ |
|---------|------|---------|
| **critical_alerts** | ç´§æ€¥å‘Šè­¦ | priority=critical |
| **architect_actions** | æ¶æ„å¸ˆæ“ä½œ | actor=architect |
| **task_lifecycle** | ä»»åŠ¡å…¨æµç¨‹ | event_types=TASK_* |
| **quality_events** | è´¨é‡ç›¸å…³ | event_types=ISSUE_*, RISK_* |
| **today** | ä»Šæ—¥äº‹ä»¶ | time_range=24h |
| **phase_c** | Phase Cäº‹ä»¶ | tags=phase-c |

**ä½¿ç”¨ç¤ºä¾‹**:
```python
# è·å–ä»Šæ—¥ç´§æ€¥å‘Šè­¦
events = event_filter.apply_template("critical_alerts").apply_template("today")
```

---

## å®ç°å»ºè®®

### Phase 1: æ ¸å¿ƒåŸºç¡€è®¾æ–½ (2å°æ—¶)

**ä»»åŠ¡**:
1. åˆ›å»ºäº‹ä»¶æ•°æ®æ¨¡å‹ (`packages/core-domain/entities/event.py`)
2. åˆ›å»ºäº‹ä»¶æšä¸¾ (`packages/core-domain/enums/event_types.py`)
3. åˆ›å»ºæ•°æ®åº“è¡¨ (`database/migrations/004_add_events.sql`)

**äº§å‡º**:
- `events`è¡¨ï¼ˆ8ä¸ªå­—æ®µï¼‰
- `BaseEvent`ç±»å®šä¹‰
- 28ç§äº‹ä»¶ç±»å‹æšä¸¾

---

### Phase 2: äº‹ä»¶æœåŠ¡å±‚ (3å°æ—¶)

**ä»»åŠ¡**:
1. å®ç°EventService (`packages/core-domain/services/event_service.py`)
   - è®°å½•äº‹ä»¶ `record_event()`
   - æŸ¥è¯¢äº‹ä»¶ `get_events()`
   - ä¼˜å…ˆçº§è®¡ç®— `calculate_priority()`
2. å®ç°EventAggregator (`packages/core-domain/services/event_aggregator.py`)
3. å®ç°EventFilter (`packages/core-domain/services/event_filter.py`)

**äº§å‡º**:
- 3ä¸ªæœåŠ¡ç±»ï¼ˆå…±~600è¡Œï¼‰

---

### Phase 3: APIç«¯ç‚¹ (2å°æ—¶)

**ä»»åŠ¡**:
1. åˆ›å»ºäº‹ä»¶APIè·¯ç”± (`apps/api/src/routes/events.py`)
   - POST /api/events - è®°å½•äº‹ä»¶
   - GET /api/events - æŸ¥è¯¢äº‹ä»¶ï¼ˆæ”¯æŒè¿‡æ»¤ï¼‰
   - GET /api/events/aggregate - èšåˆäº‹ä»¶
   - GET /api/events/stats - äº‹ä»¶ç»Ÿè®¡

**äº§å‡º**:
- 4ä¸ªAPIç«¯ç‚¹

---

### Phase 4: Dashboardé›†æˆ (3å°æ—¶)

**ä»»åŠ¡**:
1. åœ¨Dashboardæ·»åŠ "äº‹ä»¶æµ"Tab
2. å®ç°å®æ—¶äº‹ä»¶æ¨é€ï¼ˆWebSocketæˆ–è½®è¯¢ï¼‰
3. å®ç°è¿‡æ»¤UIï¼ˆä¼˜å…ˆçº§ã€ç±»å‹ã€æ—¶é—´èŒƒå›´ï¼‰

**äº§å‡º**:
- Dashboardæ–°æ¨¡å—ï¼ˆ~300è¡Œå‰ç«¯ä»£ç ï¼‰

---

### Phase 5: æµ‹è¯•å’Œæ–‡æ¡£ (2å°æ—¶)

**ä»»åŠ¡**:
1. ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆäº‹ä»¶è®°å½•ã€è¿‡æ»¤ã€èšåˆï¼‰
2. ç¼–å†™é›†æˆæµ‹è¯•ï¼ˆç«¯åˆ°ç«¯æµç¨‹ï¼‰
3. ç¼–å†™ä½¿ç”¨æ–‡æ¡£

**äº§å‡º**:
- æµ‹è¯•ç”¨ä¾‹ï¼ˆ~200è¡Œï¼‰
- ä½¿ç”¨æŒ‡å—æ–‡æ¡£

---

### æ€»è®¡å·¥æ—¶ï¼š12å°æ—¶

---

## é™„å½•

### A. äº‹ä»¶ç±»å‹é€ŸæŸ¥è¡¨

| åºå· | äº‹ä»¶ç±»å‹ | åˆ†ç±» | é»˜è®¤ä¼˜å…ˆçº§ |
|-----|---------|------|-----------|
| 1 | TASK_CREATED | ä»»åŠ¡ | Medium |
| 2 | TASK_ASSIGNED | ä»»åŠ¡ | Medium |
| 3 | TASK_STARTED | ä»»åŠ¡ | Medium |
| 4 | TASK_BLOCKED | ä»»åŠ¡ | High |
| 5 | TASK_UNBLOCKED | ä»»åŠ¡ | Medium |
| 6 | TASK_SUBMITTED | ä»»åŠ¡ | Medium |
| 7 | TASK_REVIEWED | ä»»åŠ¡ | Medium |
| 8 | TASK_COMPLETED | ä»»åŠ¡ | Medium |
| 9 | TASK_CANCELLED | ä»»åŠ¡ | Low |
| 10 | FEATURE_PROPOSED | åŠŸèƒ½ | Low |
| 11 | FEATURE_APPROVED | åŠŸèƒ½ | Medium |
| 12 | FEATURE_IN_PROGRESS | åŠŸèƒ½ | Medium |
| 13 | FEATURE_COMPLETED | åŠŸèƒ½ | High |
| 14 | FEATURE_DEPLOYED | åŠŸèƒ½ | Critical |
| 15 | ISSUE_DISCOVERED | é—®é¢˜ | ç»§æ‰¿ä¸¥é‡ç¨‹åº¦ |
| 16 | ISSUE_ASSIGNED | é—®é¢˜ | ç»§æ‰¿ |
| 17 | ISSUE_IN_PROGRESS | é—®é¢˜ | ç»§æ‰¿ |
| 18 | ISSUE_SOLVED | é—®é¢˜ | ç»§æ‰¿ |
| 19 | ISSUE_VERIFIED | é—®é¢˜ | Medium |
| 20 | ISSUE_CLOSED | é—®é¢˜ | Low |
| 21 | ARCHITECT_HANDOVER | åä½œ | High |
| 22 | ARCHITECT_RESUME | åä½œ | Medium |
| 23 | CODE_REVIEW_REQUESTED | åä½œ | Medium |
| 24 | DECISION_RECORDED | åä½œ | High |
| 25 | KNOWLEDGE_CAPTURED | åä½œ | Low |
| 26 | DEPENDENCY_ADDED | åä½œ | Medium |
| 27 | MILESTONE_REACHED | åä½œ | Critical |
| 28 | RISK_IDENTIFIED | åä½œ | Critical |

---

### B. äº‹ä»¶æšä¸¾Pythonå®ç°

```python
# packages/core-domain/enums/event_types.py

from enum import Enum

class EventType(str, Enum):
    """äº‹ä»¶ç±»å‹æšä¸¾"""
    
    # ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸ (9ç§)
    TASK_CREATED = "TASK_CREATED"
    TASK_ASSIGNED = "TASK_ASSIGNED"
    TASK_STARTED = "TASK_STARTED"
    TASK_BLOCKED = "TASK_BLOCKED"
    TASK_UNBLOCKED = "TASK_UNBLOCKED"
    TASK_SUBMITTED = "TASK_SUBMITTED"
    TASK_REVIEWED = "TASK_REVIEWED"
    TASK_COMPLETED = "TASK_COMPLETED"
    TASK_CANCELLED = "TASK_CANCELLED"
    
    # åŠŸèƒ½ç”Ÿå‘½å‘¨æœŸ (5ç§)
    FEATURE_PROPOSED = "FEATURE_PROPOSED"
    FEATURE_APPROVED = "FEATURE_APPROVED"
    FEATURE_IN_PROGRESS = "FEATURE_IN_PROGRESS"
    FEATURE_COMPLETED = "FEATURE_COMPLETED"
    FEATURE_DEPLOYED = "FEATURE_DEPLOYED"
    
    # é—®é¢˜ç”Ÿå‘½å‘¨æœŸ (6ç§)
    ISSUE_DISCOVERED = "ISSUE_DISCOVERED"
    ISSUE_ASSIGNED = "ISSUE_ASSIGNED"
    ISSUE_IN_PROGRESS = "ISSUE_IN_PROGRESS"
    ISSUE_SOLVED = "ISSUE_SOLVED"
    ISSUE_VERIFIED = "ISSUE_VERIFIED"
    ISSUE_CLOSED = "ISSUE_CLOSED"
    
    # åä½œäº‹ä»¶ (8ç§)
    ARCHITECT_HANDOVER = "ARCHITECT_HANDOVER"
    ARCHITECT_RESUME = "ARCHITECT_RESUME"
    CODE_REVIEW_REQUESTED = "CODE_REVIEW_REQUESTED"
    DECISION_RECORDED = "DECISION_RECORDED"
    KNOWLEDGE_CAPTURED = "KNOWLEDGE_CAPTURED"
    DEPENDENCY_ADDED = "DEPENDENCY_ADDED"
    MILESTONE_REACHED = "MILESTONE_REACHED"
    RISK_IDENTIFIED = "RISK_IDENTIFIED"


class EventPriority(str, Enum):
    """äº‹ä»¶ä¼˜å…ˆçº§æšä¸¾"""
    CRITICAL = "critical"
    HIGH = "high"
    MEDIUM = "medium"
    LOW = "low"


class EventCategory(str, Enum):
    """äº‹ä»¶ç±»åˆ«æšä¸¾"""
    TASK = "task"
    FEATURE = "feature"
    ISSUE = "issue"
    COLLABORATION = "collaboration"
```

---

### C. æ•°æ®åº“Schema

```sql
-- database/migrations/004_add_events.sql

CREATE TABLE IF NOT EXISTS events (
    id TEXT PRIMARY KEY,                          -- äº‹ä»¶ID (UUID)
    event_type TEXT NOT NULL,                     -- äº‹ä»¶ç±»å‹ (28ç§)
    project_id TEXT NOT NULL,                     -- é¡¹ç›®ID
    timestamp TEXT NOT NULL DEFAULT (datetime('now')),
    
    actor TEXT,                                   -- è§¦å‘è€…
    actor_type TEXT,                              -- è§¦å‘è€…ç±»å‹
    
    priority TEXT NOT NULL DEFAULT 'medium',      -- ä¼˜å…ˆçº§
    
    related_entities TEXT,                        -- å…³è”å®ä½“ (JSON)
    metadata TEXT,                                -- æ‰©å±•å…ƒæ•°æ® (JSON)
    tags TEXT,                                    -- æ ‡ç­¾ (JSONæ•°ç»„)
    
    parent_event_id TEXT,                         -- çˆ¶äº‹ä»¶ID
    correlation_id TEXT,                          -- å…³è”ID
    
    FOREIGN KEY (project_id) REFERENCES projects(id) ON DELETE CASCADE
);

-- ç´¢å¼•ä¼˜åŒ–
CREATE INDEX IF NOT EXISTS idx_events_project ON events(project_id);
CREATE INDEX IF NOT EXISTS idx_events_type ON events(event_type);
CREATE INDEX IF NOT EXISTS idx_events_priority ON events(priority);
CREATE INDEX IF NOT EXISTS idx_events_timestamp ON events(timestamp DESC);
CREATE INDEX IF NOT EXISTS idx_events_actor ON events(actor);
CREATE INDEX IF NOT EXISTS idx_events_correlation ON events(correlation_id);
```

---

## æ€»ç»“

### è®¾è®¡äº®ç‚¹

1. âœ… **å®Œå¤‡æ€§** - 28ç§äº‹ä»¶ç±»å‹è¦†ç›–é¡¹ç›®å…¨ç”Ÿå‘½å‘¨æœŸ
2. âœ… **å¯æ‰©å±•æ€§** - ç»Ÿä¸€åŸºç±»ï¼Œæ˜“äºæ–°å¢äº‹ä»¶ç±»å‹
3. âœ… **æ™ºèƒ½åŒ–** - åŠ¨æ€ä¼˜å…ˆçº§è®¡ç®—ã€æ™ºèƒ½èšåˆ
4. âœ… **æ˜“ç”¨æ€§** - é¢„è®¾è¿‡æ»¤æ¨¡æ¿ï¼Œå¼€ç®±å³ç”¨

### ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ

| ç°æœ‰æ¨¡å— | é›†æˆç‚¹ |
|---------|-------|
| ä»»åŠ¡ç®¡ç† | ä»»åŠ¡çŠ¶æ€å˜æ›´è‡ªåŠ¨è§¦å‘äº‹ä»¶ |
| é¡¹ç›®è®°å¿† | äº‹ä»¶ä½œä¸ºè®°å¿†çš„æ—¶é—´è½´ |
| Dashboard | äº‹ä»¶æµå®æ—¶å±•ç¤º |
| æ¶æ„å¸ˆAI | åŸºäºäº‹ä»¶æµåšå†³ç­– |

### ä¸‹ä¸€æ­¥

1. âœ… æœ¬æ–‡æ¡£å·²å®Œæˆ â†’ æäº¤å®¡æŸ¥
2. â³ å®ç°Phase 1-2 â†’ æ ¸å¿ƒåŠŸèƒ½
3. â³ å®ç°Phase 3-4 â†’ APIå’ŒDashboard
4. â³ ç¼–å†™æµ‹è¯•å’Œæ–‡æ¡£

---

**æ–‡æ¡£ç»´æŠ¤è€…**: AIæ¶æ„å¸ˆ  
**æœ€åæ›´æ–°**: 2025-11-18  
**ç‰ˆæœ¬**: v1.0

ğŸ“‹ **é¡¹ç›®äº‹ä»¶ç±»å‹ä½“ç³»è®¾è®¡å®Œæˆï¼**

