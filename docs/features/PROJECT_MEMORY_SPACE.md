# ğŸ“š é¡¹ç›®è®°å¿†ç©ºé—´ - å®Œæ•´æ–‡æ¡£

> **ä¸ºæ¯ä¸ªé¡¹ç›®å»ºç«‹ç‹¬ç«‹çš„AIè®°å¿†ç©ºé—´**

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

é¡¹ç›®è®°å¿†ç©ºé—´ï¼ˆProject Memory Spaceï¼‰æ˜¯ä»»åŠ¡æ‰€Â·Flow v1.7çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œå®ƒä¸ºæ¯ä¸ªæ¥å…¥çš„é¡¹ç›®å»ºç«‹ç‹¬ç«‹çš„è®°å¿†ç©ºé—´ï¼Œå®ç°ï¼š

1. **é¡¹ç›®éš”ç¦»å­˜å‚¨** - æ¯ä¸ªé¡¹ç›®çš„è®°å¿†äº’ä¸å¹²æ‰°
2. **è‡ªåŠ¨è®°å½•æ¶æ„å†³ç­–** - AIè‡ªåŠ¨è®°å½•ADRï¼ˆArchitecture Decision Recordï¼‰
3. **è‡ªåŠ¨è®°å½•é—®é¢˜è§£å†³æ–¹æ¡ˆ** - é—®é¢˜å’Œæ–¹æ¡ˆè‡ªåŠ¨å…³è”ï¼Œå½¢æˆçŸ¥è¯†å›¾è°±
4. **è·¨ä¼šè¯çŸ¥è¯†ç»§æ‰¿** - æ–°ä¼šè¯è‡ªåŠ¨è·å–å†å²çŸ¥è¯†å’Œç»éªŒ

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### ä¸‰å±‚è®°å¿†ç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 ä»»åŠ¡æ‰€Â·Flow API                          â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  æœ¬åœ°è®°å¿†å­˜å‚¨         â”‚   â”‚  å¤–éƒ¨è®°å¿†ç³»ç»Ÿ        â”‚  â”‚
â”‚  â”‚  (SQLite)            â”‚   â”‚  Session + Ultra     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                          â”‚
              â–¼                          â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ project_     â”‚          â”‚ Session      â”‚
      â”‚ memories     â”‚          â”‚ Memory MCP   â”‚
      â”‚ (æœ¬åœ°DB)     â”‚          â”‚ (AWS EC2)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚ Ultra Memory â”‚
                                â”‚ Cloud MCP    â”‚
                                â”‚ (AWS Lambda) â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®åº“è®¾è®¡

**æ ¸å¿ƒè¡¨**:

1. **project_memories** - é¡¹ç›®è®°å¿†ä¸»è¡¨
   - å­˜å‚¨æ‰€æœ‰è®°å¿†ï¼ˆæœ¬åœ°+å¤–éƒ¨å¼•ç”¨ï¼‰
   - æ”¯æŒåˆ†ç±»ã€æ ‡ç­¾ã€é‡è¦æ€§
   - å…³è”ä»»åŠ¡å’Œé—®é¢˜

2. **memory_relations** - è®°å¿†å…³ç³»è¡¨
   - å»ºç«‹è®°å¿†ä¹‹é—´çš„å…³è”
   - æ”¯æŒå¤šç§å…³ç³»ç±»å‹
   - ç”¨äºçŸ¥è¯†å›¾è°±æ„å»º

3. **memory_retrievals** - æ£€ç´¢å†å²è¡¨
   - è®°å½•æ£€ç´¢æŸ¥è¯¢å’Œç»“æœ
   - ç”¨äºä¼˜åŒ–æ¨èç®—æ³•

4. **memory_stats** - ç»Ÿè®¡è¡¨
   - é¡¹ç›®çº§åˆ«çš„è®°å¿†ç»Ÿè®¡
   - Dashboardå±•ç¤ºç”¨

---

## ğŸ“ è®°å¿†ç±»å‹å’Œåˆ†ç±»

### è®°å¿†ç±»å‹ï¼ˆMemory Typeï¼‰

| ç±»å‹ | è¯´æ˜ | å­˜å‚¨ä½ç½® | ç”¨é€” |
|------|------|---------|------|
| `session` | ä¼šè¯è®°å¿† | Session Memory | ä»»åŠ¡ç›¸å…³çš„å¯¹è¯å†å² |
| `ultra` | é•¿æœŸè®°å¿† | Ultra Memory Cloud | æ°¸ä¹…çŸ¥è¯†å’Œç»éªŒ |
| `decision` | å†³ç­–è®°å¿† | æœ¬åœ°+Ultra | æ¶æ„å†³ç­–ï¼ˆADRï¼‰ |
| `solution` | æ–¹æ¡ˆè®°å¿† | æœ¬åœ°+Ultra | é—®é¢˜è§£å†³æ–¹æ¡ˆ |
| `knowledge` | çŸ¥è¯†è®°å¿† | æœ¬åœ°+Ultra | ä¸€èˆ¬çŸ¥è¯† |

### è®°å¿†åˆ†ç±»ï¼ˆMemory Categoryï¼‰

| åˆ†ç±» | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `architecture` | æ¶æ„ç›¸å…³ | ç³»ç»Ÿè®¾è®¡ã€æŠ€æœ¯é€‰å‹ |
| `problem` | é—®é¢˜ç›¸å…³ | Bugã€æ€§èƒ½é—®é¢˜ |
| `solution` | è§£å†³æ–¹æ¡ˆ | é—®é¢˜çš„è§£å†³æ–¹æ³• |
| `decision` | å†³ç­–ç›¸å…³ | ADRã€æŠ€æœ¯å†³ç­– |
| `knowledge` | çŸ¥è¯†ç›¸å…³ | æœ€ä½³å®è·µã€ç»éªŒ |
| `experience` | ç»éªŒç›¸å…³ | è¸©å‘è®°å½•ã€æ•™è®­ |

### å…³ç³»ç±»å‹ï¼ˆRelation Typeï¼‰

| å…³ç³» | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `related` | ç›¸å…³ | ä¸¤ä¸ªçŸ¥è¯†ç‚¹ç›¸å…³ |
| `caused-by` | ç”±...å¼•èµ· | é—®é¢˜ç”±æŸå†³ç­–å¼•èµ· |
| `solved-by` | ç”±...è§£å†³ | é—®é¢˜ç”±æŸæ–¹æ¡ˆè§£å†³ |
| `evolved-from` | ç”±...æ¼”åŒ– | æ–°æ–¹æ¡ˆç”±æ—§æ–¹æ¡ˆæ¼”åŒ– |
| `depends-on` | ä¾èµ–äº | çŸ¥è¯†ä¾èµ–äºå…¶ä»–çŸ¥è¯† |

---

## ğŸš€ ä½¿ç”¨æŒ‡å—

### 1. åŸºç¡€è®°å¿†ç®¡ç†

#### åˆ›å»ºè®°å¿†

```http
POST /api/projects/{project_code}/memories
Content-Type: application/json

{
    "memory_type": "ultra",
    "category": "knowledge",
    "title": "React Hooks æœ€ä½³å®è·µ",
    "content": "ä½¿ç”¨ useCallback å’Œ useMemo ä¼˜åŒ–æ€§èƒ½...",
    "tags": ["react", "hooks", "performance"],
    "importance": 7,
    "created_by": "AI Architect"
}
```

**å“åº”**:
```json
{
    "success": true,
    "memory": {
        "id": "MEM-abc12345",
        "project_id": "TASKFLOW",
        "title": "React Hooks æœ€ä½³å®è·µ",
        "created_at": "2025-11-18T20:00:00"
    }
}
```

#### æ£€ç´¢è®°å¿†

```http
GET /api/projects/{project_code}/memories?query=å¦‚ä½•ä¼˜åŒ–æ€§èƒ½&limit=10
```

**æ”¯æŒçš„è¿‡æ»¤å‚æ•°**:
- `query`: æŸ¥è¯¢æ–‡æœ¬ï¼ˆè¯­ä¹‰æœç´¢ï¼‰
- `category`: åˆ†ç±»è¿‡æ»¤
- `memory_type`: ç±»å‹è¿‡æ»¤
- `tags`: æ ‡ç­¾è¿‡æ»¤ï¼ˆé€—å·åˆ†éš”ï¼‰
- `limit`: è¿”å›æ•°é‡ï¼ˆ1-100ï¼‰

**å“åº”**:
```json
{
    "success": true,
    "project_id": "TASKFLOW",
    "memories": [
        {
            "id": "MEM-abc12345",
            "title": "React Hooks æœ€ä½³å®è·µ",
            "content": "...",
            "importance": 7,
            "tags": ["react", "hooks", "performance"]
        }
    ],
    "count": 1
}
```

---

### 2. è‡ªåŠ¨è®°å½•åŠŸèƒ½

#### è‡ªåŠ¨è®°å½•æ¶æ„å†³ç­–ï¼ˆADRï¼‰

**ç”¨é€”**: æ¶æ„å¸ˆAIè‡ªåŠ¨è®°å½•æ¶æ„å†³ç­–ï¼Œæ ¼å¼åŒ–ä¸ºæ ‡å‡†ADR

```http
POST /api/projects/{project_code}/memories/auto-record/decision
Content-Type: application/json

{
    "title": "é‡‡ç”¨ Monorepo æ¶æ„",
    "context": "é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œéœ€è¦ç»Ÿä¸€ç®¡ç†å¤šä¸ªåŒ…ï¼Œæé«˜ä»£ç å¤ç”¨æ€§",
    "decision": "ä½¿ç”¨ pnpm workspace å®ç° Monorepoï¼Œç»Ÿä¸€ä¾èµ–ç®¡ç†",
    "consequences": "ä¼˜ç‚¹ï¼šæé«˜ä»£ç å¤ç”¨ï¼Œç®€åŒ–ä¾èµ–ï¼›ç¼ºç‚¹ï¼šå¢åŠ ä»“åº“å¤æ‚åº¦",
    "alternatives": ["Lerna", "Nx", "Turborepo"],
    "decided_by": "AI Architect"
}
```

**ç”Ÿæˆçš„ADRæ ¼å¼**:
```markdown
# ADR: é‡‡ç”¨ Monorepo æ¶æ„

## èƒŒæ™¯ (Context)

é¡¹ç›®è§„æ¨¡æ‰©å¤§ï¼Œéœ€è¦ç»Ÿä¸€ç®¡ç†å¤šä¸ªåŒ…ï¼Œæé«˜ä»£ç å¤ç”¨æ€§

## å†³ç­– (Decision)

ä½¿ç”¨ pnpm workspace å®ç° Monorepoï¼Œç»Ÿä¸€ä¾èµ–ç®¡ç†

## å½±å“ (Consequences)

ä¼˜ç‚¹ï¼šæé«˜ä»£ç å¤ç”¨ï¼Œç®€åŒ–ä¾èµ–ï¼›ç¼ºç‚¹ï¼šå¢åŠ ä»“åº“å¤æ‚åº¦

## å¤‡é€‰æ–¹æ¡ˆ (Alternatives)

1. Lerna
2. Nx
3. Turborepo

## æ—¥æœŸ

2025-11-18
```

#### è‡ªåŠ¨è®°å½•é—®é¢˜è§£å†³æ–¹æ¡ˆ

**ç”¨é€”**: è‡ªåŠ¨è®°å½•é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆï¼Œå»ºç«‹å…³è”å…³ç³»

```http
POST /api/projects/{project_code}/memories/auto-record/solution
Content-Type: application/json

{
    "problem_title": "Dashboard Tab åˆ‡æ¢å¤±è´¥",
    "problem_description": "æ‰€æœ‰TabæŒ‰é’®ç‚¹å‡»åæ— ååº”ï¼ŒJavaScriptåå¼•å·æœªè½¬ä¹‰å¯¼è‡´è¯­æ³•é”™è¯¯",
    "solution_title": "ä¿®å¤æ¨¡æ¿å­—ç¬¦ä¸²è½¬ä¹‰",
    "solution_description": "åœ¨Python f-stringä¸­è½¬ä¹‰JavaScriptçš„åå¼•å·",
    "solution_steps": [
        "å®šä½é”™è¯¯ä½ç½®ï¼štemplates.pyç¬¬4361ã€4363è¡Œ",
        "æ·»åŠ åæ–œæ è½¬ä¹‰ï¼š` æ”¹ä¸º \\`",
        "æµ‹è¯•éªŒè¯ï¼šnode -c æ£€æŸ¥è¯­æ³•",
        "æ¢ç«¯å£é¿å…ç¼“å­˜ï¼š8858 â†’ 8860"
    ],
    "tools_used": ["node -c", "debug_tab_issue.py", "Chrome DevTools"],
    "severity": "high",
    "component_id": "TASKFLOW-dashboard"
}
```

**å“åº”**:
```json
{
    "success": true,
    "message": "Problem and solution recorded successfully",
    "problem_memory_id": "MEM-PROB-abc123",
    "solution_memory_id": "MEM-SOL-xyz789",
    "relation_created": true,
    "recorded_at": "2025-11-18T20:00:00"
}
```

**è‡ªåŠ¨å»ºç«‹å…³ç³»**:
- è§£å†³æ–¹æ¡ˆ `solved-by` é—®é¢˜
- å­˜å‚¨åˆ°æœ¬åœ°æ•°æ®åº“çš„ `issues` å’Œ `solutions` è¡¨
- å­˜å‚¨åˆ° Ultra Memory Cloud ä½œä¸ºé•¿æœŸçŸ¥è¯†

---

### 3. è·¨ä¼šè¯çŸ¥è¯†ç»§æ‰¿

**ç”¨é€”**: æ–°ä¼šè¯å¼€å§‹æ—¶ï¼Œè‡ªåŠ¨è·å–é¡¹ç›®çš„å†å²çŸ¥è¯†

```http
GET /api/projects/{project_code}/knowledge/inherit?context=å‡†å¤‡å¼€å§‹é‡æ„&limit=20
```

**è¿”å›çŸ¥è¯†åŒ…**:
```json
{
    "success": true,
    "project_id": "TASKFLOW",
    "context": "å‡†å¤‡å¼€å§‹é‡æ„",
    "decisions": [
        {
            "id": "MEM-DEC-001",
            "title": "ADR: é‡‡ç”¨ Monorepo æ¶æ„",
            "content": "...",
            "importance": 8
        }
    ],
    "solutions": [
        {
            "id": "MEM-SOL-001",
            "title": "ä¿®å¤Tabåˆ‡æ¢é—®é¢˜",
            "content": "...",
            "importance": 8
        }
    ],
    "important_knowledge": [
        {
            "id": "MEM-KNW-001",
            "title": "Python f-string é™·é˜±",
            "content": "...",
            "importance": 9
        }
    ],
    "recent_memories": [
        {
            "id": "MEM-REC-001",
            "title": "æœ€è¿‘çš„æ¶æ„å˜æ›´",
            "created_at": "2025-11-17T10:00:00"
        }
    ],
    "related_memories": [
        {
            "id": "MEM-REL-001",
            "title": "é‡æ„ç›¸å…³çš„ç»éªŒ",
            "relevance": 0.92
        }
    ],
    "total_inherited": 15,
    "inherited_at": "2025-11-18T20:00:00",
    "usage_hint": "ä½¿ç”¨è¿™äº›çŸ¥è¯†å¸®åŠ©æ–°ä¼šè¯å¿«é€Ÿäº†è§£é¡¹ç›®å†å²å’Œç»éªŒ"
}
```

**çŸ¥è¯†åŒ…åŒ…å«**:
1. **æ¶æ„å†³ç­–å†å²** - é¡¹ç›®çš„é‡è¦æ¶æ„å†³ç­–ï¼ˆæŒ‰é‡è¦æ€§æ’åºï¼‰
2. **é—®é¢˜è§£å†³æ–¹æ¡ˆ** - å·²è§£å†³é—®é¢˜çš„æ–¹æ¡ˆï¼ˆé¿å…é‡å¤è¸©å‘ï¼‰
3. **é‡è¦çŸ¥è¯†** - é«˜é‡è¦æ€§ï¼ˆâ‰¥7ï¼‰çš„çŸ¥è¯†ç‚¹
4. **æœ€è¿‘è®°å¿†** - æœ€è¿‘7å¤©çš„è®°å¿†ï¼ˆäº†è§£æœ€æ–°è¿›å±•ï¼‰
5. **ç›¸å…³è®°å¿†** - ä¸å½“å‰ä¸Šä¸‹æ–‡ç›¸å…³çš„è®°å¿†ï¼ˆè¯­ä¹‰æœç´¢ï¼‰

---

### 4. è®°å¿†å…³ç³»ç®¡ç†

#### åˆ›å»ºè®°å¿†å…³ç³»

```http
POST /api/projects/{project_code}/memories/relations
Content-Type: application/json

{
    "source_memory_id": "MEM-SOL-001",
    "target_memory_id": "MEM-PROB-001",
    "relation_type": "solved-by",
    "strength": 1.0
}
```

#### è·å–ç›¸å…³è®°å¿†

```http
GET /api/projects/{project_code}/memories/MEM-001/related?relation_types=solved-by,related&min_strength=0.5
```

**å“åº”**:
```json
{
    "success": true,
    "memory_id": "MEM-001",
    "related_memories": [
        {
            "id": "MEM-002",
            "title": "ç›¸å…³è®°å¿†",
            "relation_type": "related",
            "strength": 0.85
        }
    ],
    "count": 1
}
```

---

### 5. è®°å¿†ç»Ÿè®¡å’Œç®¡ç†

#### è·å–ç»Ÿè®¡

```http
GET /api/projects/{project_code}/memories/stats
```

**å“åº”**:
```json
{
    "success": true,
    "project_id": "TASKFLOW",
    "stats": {
        "total_memories": 156,
        "session_memories": 45,
        "ultra_memories": 89,
        "decision_memories": 12,
        "solution_memories": 34,
        "by_category": {
            "architecture": 15,
            "problem": 28,
            "solution": 34,
            "decision": 12,
            "knowledge": 67
        },
        "by_importance": {
            "critical (9-10)": 8,
            "high (7-8)": 23,
            "medium (5-6)": 89,
            "low (1-4)": 36
        },
        "last_updated": "2025-11-18T20:00:00"
    }
}
```

#### å¥åº·æ£€æŸ¥

```http
GET /api/projects/{project_code}/memories/health
```

**æ£€æŸ¥é¡¹**:
- æœ¬åœ°æ•°æ®åº“è¿æ¥
- Session Memory MCP çŠ¶æ€
- Ultra Memory Cloud MCP çŠ¶æ€

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. è®°å¿†é‡è¦æ€§è¯„åˆ†æŒ‡å—

| é‡è¦æ€§ | åˆ†æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|
| å…³é”® | 9-10 | æ ¸å¿ƒæ¶æ„ã€é‡å¤§å†³ç­– | ç³»ç»Ÿæ¶æ„è®¾è®¡ã€æŠ€æœ¯æ ˆé€‰å‹ |
| é«˜ | 7-8 | é‡è¦åŠŸèƒ½ã€å…³é”®é—®é¢˜ | æ ¸å¿ƒç®—æ³•ã€ä¸¥é‡Bugä¿®å¤ |
| ä¸­ | 5-6 | å¸¸è§„åŠŸèƒ½ã€ä¸€èˆ¬çŸ¥è¯† | å·¥å…·é…ç½®ã€ä»£ç è§„èŒƒ |
| ä½ | 1-4 | ä¸´æ—¶ä¿¡æ¯ã€æ¬¡è¦ç»†èŠ‚ | ä¸´æ—¶è§£å†³æ–¹æ¡ˆã€çç¢é—®é¢˜ |

### 2. ä½•æ—¶ä½¿ç”¨è‡ªåŠ¨è®°å½•

**è‡ªåŠ¨è®°å½•æ¶æ„å†³ç­–**:
- âœ… é‡è¦çš„æŠ€æœ¯é€‰å‹
- âœ… ç³»ç»Ÿæ¶æ„å˜æ›´
- âœ… é‡å¤§é‡æ„å†³ç­–
- âŒ ä¸´æ—¶çš„ä»£ç è°ƒæ•´

**è‡ªåŠ¨è®°å½•é—®é¢˜è§£å†³æ–¹æ¡ˆ**:
- âœ… éš¾ä»¥è¯Šæ–­çš„Bug
- âœ… æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
- âœ… å¤æ‚çš„é›†æˆé—®é¢˜
- âŒ ç®€å•çš„è¯­æ³•é”™è¯¯

### 3. æ ‡ç­¾ä½¿ç”¨å»ºè®®

**æŠ€æœ¯æ ˆæ ‡ç­¾**:
- `python`, `javascript`, `react`, `fastapi`

**ç±»å‹æ ‡ç­¾**:
- `performance`, `security`, `testing`, `deployment`

**ä¼˜å…ˆçº§æ ‡ç­¾**:
- `critical`, `urgent`, `nice-to-have`

**çŠ¶æ€æ ‡ç­¾**:
- `resolved`, `workaround`, `need-refactor`

### 4. çŸ¥è¯†ç»§æ‰¿ç­–ç•¥

**æ–°ä¼šè¯å¼€å§‹æ—¶**:
```python
# 1. é¦–å…ˆç»§æ‰¿çŸ¥è¯†
knowledge = inherit_knowledge(
    project_id="TASKFLOW",
    context="å¼€å§‹å¼€å‘æ–°åŠŸèƒ½",
    limit=20
)

# 2. å¿«é€Ÿäº†è§£é¡¹ç›®
- é˜…è¯»æ¶æ„å†³ç­–ï¼ˆ3-5åˆ†é’Ÿï¼‰
- æµè§ˆé‡è¦é—®é¢˜å’Œæ–¹æ¡ˆï¼ˆ5åˆ†é’Ÿï¼‰
- äº†è§£æœ€è¿‘å˜æ›´ï¼ˆ2åˆ†é’Ÿï¼‰

# 3. å¼€å§‹å·¥ä½œ
```

**ä¼šè¯ç»“æŸæ—¶**:
```python
# è®°å½•æœ¬æ¬¡ä¼šè¯çš„é‡è¦å‘ç°
if æœ‰é‡è¦å†³ç­–:
    auto_record_architecture_decision(...)

if è§£å†³äº†é‡è¦é—®é¢˜:
    auto_record_problem_solution(...)
```

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### æœåŠ¡å±‚

**æ ¸å¿ƒç±»**: `ProjectMemoryService`

**ä¸»è¦æ–¹æ³•**:
- `create_memory()` - åˆ›å»ºè®°å¿†
- `retrieve_memories()` - æ£€ç´¢è®°å¿†
- `auto_record_architecture_decision()` - è‡ªåŠ¨è®°å½•å†³ç­–
- `auto_record_problem_solution()` - è‡ªåŠ¨è®°å½•æ–¹æ¡ˆ
- `inherit_knowledge()` - çŸ¥è¯†ç»§æ‰¿
- `create_memory_relation()` - åˆ›å»ºå…³ç³»

### æ•°æ®åº“

**è¡¨ç»“æ„**:
- `project_memories` - è®°å¿†ä¸»è¡¨ï¼ˆ8ä¸ªç´¢å¼•ï¼‰
- `memory_relations` - å…³ç³»è¡¨ï¼ˆ2ä¸ªç´¢å¼•ï¼‰
- `memory_retrievals` - æ£€ç´¢å†å²
- `memory_stats` - ç»Ÿè®¡è¡¨

### å¤–éƒ¨é›†æˆ

**Session Memory MCP**:
- ç”¨é€”ï¼šä¼šè¯çº§è®°å¿†
- å­˜å‚¨ï¼šAWS EC2 + PostgreSQL
- API: http://13.158.83.99:4000

**Ultra Memory Cloud MCP**:
- ç”¨é€”ï¼šé•¿æœŸçŸ¥è¯†è®°å¿†
- å­˜å‚¨ï¼šAWS Lambda + DynamoDB
- ç‰¹æ€§ï¼šè¯­ä¹‰æœç´¢ã€å…³ç³»æ¨ç†

---

## ğŸ§ª æµ‹è¯•

### å•å…ƒæµ‹è¯•

```bash
# è¿è¡ŒæœåŠ¡å±‚æµ‹è¯•
python tests/test_project_memory_service.py

# è¿è¡ŒAPIæµ‹è¯•
python tests/test_project_memory_api.py
```

**æµ‹è¯•è¦†ç›–**:
- âœ… è®°å¿†åˆ›å»ºï¼ˆåŸºç¡€ã€æ ‡ç­¾ã€å…³è”ï¼‰
- âœ… è‡ªåŠ¨è®°å½•ï¼ˆå†³ç­–ã€æ–¹æ¡ˆï¼‰
- âœ… çŸ¥è¯†ç»§æ‰¿
- âœ… å…³ç³»ç®¡ç†
- âœ… æ ¼å¼åŒ–åŠŸèƒ½
- âœ… APIç«¯ç‚¹

---

## ğŸ“Š ä½¿ç”¨åœºæ™¯

### åœºæ™¯1ï¼šæ¶æ„å¸ˆæ¥æ‰‹æ–°é¡¹ç›®

```
1. è°ƒç”¨çŸ¥è¯†ç»§æ‰¿API
GET /api/projects/NEW_PROJECT/knowledge/inherit?context=åˆæ¬¡æ¥æ‰‹é¡¹ç›®

2. è·å¾—ï¼š
   - é¡¹ç›®çš„æ¶æ„å†³ç­–å†å²
   - å·²çŸ¥çš„æŠ€æœ¯å€ºåŠ¡å’Œé—®é¢˜
   - é‡è¦çš„ä»£ç è§„èŒƒå’Œæœ€ä½³å®è·µ

3. å¿«é€Ÿä¸Šæ‰‹ï¼ˆèŠ‚çœ50%æ—¶é—´ï¼‰
```

### åœºæ™¯2ï¼šé—®é¢˜å¤ç°

```
1. é‡åˆ°ç±»ä¼¼é—®é¢˜
2. æœç´¢è®°å¿†
GET /api/projects/TASKFLOW/memories?query=Tabåˆ‡æ¢å¤±è´¥

3. æ‰¾åˆ°ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆ
4. åº”ç”¨ç›¸åŒçš„ä¿®å¤æ–¹æ³•ï¼ˆèŠ‚çœ80%è°ƒè¯•æ—¶é—´ï¼‰
```

### åœºæ™¯3ï¼šæŠ€æœ¯å†³ç­–

```
1. éœ€è¦åšæŠ€æœ¯é€‰å‹
2. æœç´¢ç›¸å…³å†³ç­–
GET /api/projects/TASKFLOW/memories?category=decision&tags=architecture

3. äº†è§£ä¹‹å‰çš„å†³ç­–å’ŒåŸå› 
4. é¿å…é‡å¤å†³ç­–æˆ–å†²çªå†³ç­–
```

---

## ğŸš¦ APIå®Œæ•´åˆ—è¡¨

| æ–¹æ³• | è·¯å¾„ | ç”¨é€” |
|------|------|------|
| POST | `/api/projects/{code}/memories` | åˆ›å»ºè®°å¿† |
| GET | `/api/projects/{code}/memories` | æ£€ç´¢è®°å¿† |
| GET | `/api/projects/{code}/memories/{id}` | è·å–è®°å¿†è¯¦æƒ… |
| DELETE | `/api/projects/{code}/memories/{id}` | åˆ é™¤è®°å¿† |
| POST | `/api/projects/{code}/memories/auto-record/decision` | è‡ªåŠ¨è®°å½•å†³ç­– |
| POST | `/api/projects/{code}/memories/auto-record/solution` | è‡ªåŠ¨è®°å½•æ–¹æ¡ˆ |
| GET | `/api/projects/{code}/knowledge/inherit` | çŸ¥è¯†ç»§æ‰¿ |
| POST | `/api/projects/{code}/memories/relations` | åˆ›å»ºå…³ç³» |
| GET | `/api/projects/{code}/memories/{id}/related` | è·å–ç›¸å…³è®°å¿† |
| GET | `/api/projects/{code}/memories/stats` | è·å–ç»Ÿè®¡ |
| GET | `/api/projects/{code}/memories/health` | å¥åº·æ£€æŸ¥ |

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ•°æ®åº“Schema](../../database/migrations/003_add_project_memories.sql)
- [æœåŠ¡å±‚å®ç°](../../packages/core-domain/src/services/project_memory_service.py)
- [APIè·¯ç”±](../../apps/api/src/routes/project_memory.py)
- [å•å…ƒæµ‹è¯•](../../tests/test_project_memory_service.py)
- [Session Memoryä½¿ç”¨æŒ‡å—](../../ğŸ§ Evaçš„åŒè®°å¿†ç³»ç»Ÿ-å®Œæ•´ä½¿ç”¨æŒ‡å—.md)

---

## ğŸ‰ æ€»ç»“

é¡¹ç›®è®°å¿†ç©ºé—´æ˜¯ä»»åŠ¡æ‰€Â·Flowçš„æ ¸å¿ƒåˆ›æ–°ï¼š

âœ… **é¡¹ç›®éš”ç¦»** - æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹è®°å¿†ç©ºé—´  
âœ… **è‡ªåŠ¨è®°å½•** - AIè‡ªåŠ¨è®°å½•å†³ç­–å’Œæ–¹æ¡ˆ  
âœ… **çŸ¥è¯†ç»§æ‰¿** - è·¨ä¼šè¯å¿«é€Ÿä¸Šæ‰‹  
âœ… **å…³ç³»å›¾è°±** - çŸ¥è¯†ä¹‹é—´è‡ªåŠ¨å…³è”  
âœ… **è¯­ä¹‰æœç´¢** - åŸºäºæ„æ€è€Œéå…³é”®è¯  
âœ… **å¤šå±‚å­˜å‚¨** - æœ¬åœ°+Session+Ultraä¸‰å±‚  

**æ•ˆæœ**:
- ğŸ“‰ å‡å°‘50%æ–°äººä¸Šæ‰‹æ—¶é—´
- ğŸ“‰ å‡å°‘80%é‡å¤é—®é¢˜è°ƒè¯•æ—¶é—´
- ğŸ“ˆ æé«˜çŸ¥è¯†æ²‰æ·€å’Œå¤ç”¨
- ğŸ“ˆ æé«˜å›¢é˜Ÿåä½œæ•ˆç‡

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¶é—´**: 2025-11-18  
**ç»´æŠ¤è€…**: AI Architect

