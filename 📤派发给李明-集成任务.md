# 📤 派发给李明 - 3个集成任务（Critical）

**派发时间**: 2025-11-19 02:16  
**派发人**: AI Architect (Expert Level)  
**接收人**: 全栈工程师·李明  
**优先级**: 🔴 P0 Critical  
**原因**: 用户明确反馈"看不到/感觉不到"这些功能

---

## 🚨 问题说明

李明，你完成的3个满分任务（REQ-001/003/006），**代码写得非常好**，但有一个严重问题：

**功能没有集成到运行中的Dashboard上！**

**用户反馈**:
- "没感觉到REQ-001的缓存清除"
- Dashboard上Tab还叫"对话交流"（不是"对话历史库"）
- "没感觉到REQ-006的Token同步"

**原因分析**:
- 代码可能写在了新文件中
- 但没有替换templates.py中的旧代码
- 或者Dashboard没有重启加载新代码

---

## 🚀 开始前必读

```markdown
@taskflow-v1.7-monorepo/docs/ai/fullstack-engineer-system-prompt.md
@taskflow-v1.7-monorepo/📤派发给李明-集成任务.md
```

---

## 🚀 第一步：接收任务（必做！）

⚠️ **重要**: 看到此文档后，**立即执行**以下命令之一：

```bash
cd taskflow-v1.7-monorepo

# 如果执行INTEGRATE-001
python scripts/李明收到任务.py INTEGRATE-001

# 如果执行INTEGRATE-002
python scripts/李明收到任务.py INTEGRATE-002

# 如果执行INTEGRATE-003
python scripts/李明收到任务.py INTEGRATE-003
```

**这会做什么**:
- ✅ 更新任务状态: pending → in_progress
- ✅ Dashboard实时显示"⚙️ 进行中"
- ✅ 架构师可以看到你的进度

**⚠️ 不运行此脚本，Dashboard状态不会更新！**

---

## 📋 任务清单

### TASK-INTEGRATE-003: 集成对话历史库 🔴 最紧急

**工时**: 1小时  
**优先级**: P0  
**用户明确要求**: "把对话交流改成对话历史库"

#### 当前问题
Dashboard上显示：
```
架构师监控 > 对话交流 Tab  ← 还是旧名称！
```

应该显示：
```
架构师监控 > 对话历史库 Tab  ← 新名称
左侧：会话列表（3个会话，搜索框）
右侧：会话详情（消息列表，Token统计）
```

#### 具体操作

**1. 定位旧代码**:
在`apps/dashboard/src/industrial_dashboard/templates.py`中查找：
```python
# 对话交流 Tab
```

**2. 替换内容**:
- Tab标题：`对话交流` → `对话历史库`
- HTML结构：完全替换为左右分栏布局
- CSS样式：添加REQ-003的254行样式
- JavaScript：添加REQ-003的193行逻辑

**3. 数据文件**:
确认`automation-data/architect-conversations.json`存在且有3个示例会话

**4. 测试**:
```bash
# 重启Dashboard
cd apps/dashboard
Stop-Process -Name python -Force
python start_dashboard.py

# 验证
# 1. Tab名称是"对话历史库"
# 2. 左侧显示会话列表
# 3. 点击会话显示详情
# 4. 搜索功能正常
```

#### 参考资料
- `✅REQ-003-对话历史库功能-完成报告.md`（你之前写的完整实现）
- 代码都在报告里，复制粘贴即可

---

### TASK-INTEGRATE-001: 集成缓存清除功能 🔴

**工时**: 1小时  
**优先级**: P0

#### 任务目标
验证并确保"清除缓存"按钮在Dashboard上

#### 具体操作

**1. 检查当前Dashboard**:
打开 http://localhost:8877，查找：
- [ ] "缓存版本: vXXXXX"显示在哪？
- [ ] "🔄 清除缓存"按钮在哪？

**2. 如果没有**:
- 在templates.py的项目信息区域添加
- 位置建议：项目名称下方
- 添加UI代码和JavaScript函数

**3. 如果有但不明显**:
- 调整到更显著的位置
- 增加视觉强调（颜色/大小）

**4. 验证功能**:
- [ ] 点击按钮弹出确认对话框
- [ ] 确认后页面刷新
- [ ] 版本号更新

#### 参考资料
- `REQ-001-完成报告.md`（完整实现说明）

---

### TASK-INTEGRATE-006: 集成Token同步功能 🔴

**工时**: 1小时  
**优先级**: P0

#### 任务目标
确保Token同步按钮在Dashboard上且可用

#### 具体操作

**1. 检查Token显示区域**:
Dashboard右上角"Token余量"区域，应该有：
- [ ] Token使用量显示
- [ ] "🔄 同步"按钮

**2. 如果没有**:
- 在Token显示区域添加同步按钮
- 添加JavaScript对话框逻辑
- 添加API调用

**3. 验证快捷脚本**:
- [ ] `🔄快速同步Token.bat`存在吗？
- [ ] 在项目根目录吗？
- [ ] 可以运行吗？

**4. 功能测试**:
- [ ] 点击按钮弹出输入框
- [ ] 输入Token值可同步
- [ ] Dashboard立即更新
- [ ] 快捷脚本可用

#### 参考资料
- `docs/REQ-006-Token同步使用指南.md`

---

## ⚠️ 特别强调

**李明，这次任务的核心是**：

> **不是写新代码，而是确保你写的代码真的在运行中的Dashboard上！**

**步骤**:
1. 先检查Dashboard（实际运行的界面）
2. 如果功能不在 → 集成你写的代码
3. 重启Dashboard
4. 验证用户能看到和使用
5. 提交完成报告（包含截图）

**验收标准**:
- ✅ 不是"代码写了"
- ✅ 而是"用户能用到"

---

## 📋 工作流程

```
1. 加载必读文档
   ↓
2. 检查Dashboard实际显示
   ↓
3. 如果功能不在 → 集成代码
   ↓
4. 重启Dashboard
   ↓
5. 验证功能可用
   ↓
6. 截图证明
   ↓
7. 提交完成报告
```

---

## 🎯 期望产出

**3个任务完成后**:
- ✅ Dashboard上Tab显示"对话历史库"（不是"对话交流"）
- ✅ 用户能看到"清除缓存"按钮并使用
- ✅ 用户能看到"Token同步"按钮并使用

**用户评价从**:
- "没感觉到" → "功能很好用！"

---

**李明，这是紧急集成任务！请优先处理！** 🚨

**记住**:
- ✅ 先读完成报告（你之前写的实现）
- ✅ 检查Dashboard实际状态
- ✅ 集成代码到运行中的Dashboard
- ✅ 提交完成报告（含截图）

**工作愉快！期待你的集成报告！**

---

## 📝 最后一步：提交完成（必做！）

每完成一个任务后，**立即执行**:

```bash
cd taskflow-v1.7-monorepo

# INTEGRATE-001完成后
python scripts/李明提交完成.py INTEGRATE-001 --hours <实际工时>

# INTEGRATE-002完成后
python scripts/李明提交完成.py INTEGRATE-002 --hours <实际工时>

# INTEGRATE-003完成后
python scripts/李明提交完成.py INTEGRATE-003 --hours <实际工时>
```

**示例**:
```bash
python scripts/李明提交完成.py INTEGRATE-001 --hours 2 --summary "端口管理器已集成，测试通过"
```

**这会做什么**:
- ✅ 更新任务状态: in_progress → completed
- ✅ 记录实际工时
- ✅ Dashboard显示"📄 一键复制完成报告"按钮

**然后**: 在Dashboard点击按钮，复制完成报告，提交给架构师！

---

**架构师**: AI Architect (Expert Level)  
**派发时间**: 2025-11-19 02:16  
**Dashboard**: http://localhost:8877

