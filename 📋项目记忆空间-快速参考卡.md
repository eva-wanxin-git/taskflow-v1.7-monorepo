# ğŸ“‹ é¡¹ç›®è®°å¿†ç©ºé—´ - å¿«é€Ÿå‚è€ƒå¡

> **1é¡µçº¸å¿«é€Ÿå‚è€ƒ**

---

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | æ–¹æ³•/API | ç”¨é€” |
|------|---------|------|
| **åˆ›å»ºè®°å¿†** | `create_memory()` | æ‰‹åŠ¨åˆ›å»ºé¡¹ç›®è®°å¿† |
| **æ£€ç´¢è®°å¿†** | `retrieve_memories()` | æœç´¢å†å²è®°å¿† |
| **è®°å½•å†³ç­–** | `auto_record_architecture_decision()` | è‡ªåŠ¨è®°å½•ADR |
| **è®°å½•æ–¹æ¡ˆ** | `auto_record_problem_solution()` | è‡ªåŠ¨è®°å½•é—®é¢˜æ–¹æ¡ˆ |
| **çŸ¥è¯†ç»§æ‰¿** | `inherit_knowledge()` | è·¨ä¼šè¯è·å–çŸ¥è¯† |
| **åˆ›å»ºå…³ç³»** | `create_memory_relation()` | å…³è”è®°å¿† |

---

## ğŸ“Š è®°å¿†ç±»å‹

| ç±»å‹ | å€¼ | å­˜å‚¨ä½ç½® |
|------|-------|---------|
| ä¼šè¯è®°å¿† | `session` | Session Memory |
| é•¿æœŸè®°å¿† | `ultra` | Ultra Memory Cloud |
| å†³ç­–è®°å¿† | `decision` | æœ¬åœ°+Ultra |
| æ–¹æ¡ˆè®°å¿† | `solution` | æœ¬åœ°+Ultra |
| çŸ¥è¯†è®°å¿† | `knowledge` | æœ¬åœ°+Ultra |

---

## ğŸ·ï¸ è®°å¿†åˆ†ç±»

| åˆ†ç±» | å€¼ | ç¤ºä¾‹ |
|------|------|------|
| æ¶æ„ | `architecture` | ç³»ç»Ÿè®¾è®¡ |
| é—®é¢˜ | `problem` | Bugè®°å½• |
| æ–¹æ¡ˆ | `solution` | è§£å†³æ–¹æ³• |
| å†³ç­– | `decision` | ADR |
| çŸ¥è¯† | `knowledge` | æœ€ä½³å®è·µ |

---

## ğŸ”— å…³ç³»ç±»å‹

| å…³ç³» | å€¼ | è¯´æ˜ |
|------|------|------|
| ç›¸å…³ | `related` | ä¸€èˆ¬å…³è” |
| å¼•èµ· | `caused-by` | å› æœå…³ç³» |
| è§£å†³ | `solved-by` | è§£å†³å…³ç³» |
| æ¼”åŒ– | `evolved-from` | æ¼”åŒ–å…³ç³» |

---

## ğŸŒ APIå¿«é€Ÿå‚è€ƒ

### åŸºç¡€æ“ä½œ

```bash
# åˆ›å»ºè®°å¿†
POST /api/projects/{code}/memories

# æ£€ç´¢è®°å¿†
GET /api/projects/{code}/memories?query=æ–‡æœ¬&limit=10

# è·å–ç»Ÿè®¡
GET /api/projects/{code}/memories/stats
```

### è‡ªåŠ¨è®°å½•

```bash
# è®°å½•æ¶æ„å†³ç­–
POST /api/projects/{code}/memories/auto-record/decision

# è®°å½•é—®é¢˜æ–¹æ¡ˆ
POST /api/projects/{code}/memories/auto-record/solution
```

### çŸ¥è¯†ç»§æ‰¿

```bash
# è·å–å†å²çŸ¥è¯†
GET /api/projects/{code}/knowledge/inherit?context=å½“å‰ä»»åŠ¡&limit=20
```

---

## ğŸ’» Pythonä»£ç ç‰‡æ®µ

### åˆ›å»ºè®°å¿†

```python
from services.project_memory_service import create_project_memory_service

service = create_project_memory_service()

memory = service.create_memory(
    project_id="TASKFLOW",
    memory_type="ultra",
    category="knowledge",
    title="æ ‡é¢˜",
    content="å†…å®¹",
    tags=["tag1", "tag2"],
    importance=7
)
```

### è‡ªåŠ¨è®°å½•å†³ç­–

```python
service.auto_record_architecture_decision(
    project_id="TASKFLOW",
    title="å†³ç­–æ ‡é¢˜",
    context="èƒŒæ™¯",
    decision="å†³ç­–å†…å®¹",
    consequences="å½±å“",
    alternatives=["æ–¹æ¡ˆ1", "æ–¹æ¡ˆ2"]
)
```

### çŸ¥è¯†ç»§æ‰¿

```python
knowledge = service.inherit_knowledge(
    project_id="TASKFLOW",
    context="å¼€å§‹æ–°ä»»åŠ¡",
    limit=20
)

# è¿”å›ï¼š
# - decisions: æ¶æ„å†³ç­–
# - solutions: è§£å†³æ–¹æ¡ˆ
# - important_knowledge: é‡è¦çŸ¥è¯†
# - recent_memories: æœ€è¿‘è®°å¿†
# - related_memories: ç›¸å…³è®°å¿†
```

---

## ğŸ“ˆ é‡è¦æ€§è¯„åˆ†æŒ‡å—

| åˆ†æ•° | çº§åˆ« | è¯´æ˜ |
|------|------|------|
| 9-10 | å…³é”® | æ ¸å¿ƒæ¶æ„ã€é‡å¤§å†³ç­– |
| 7-8 | é«˜ | é‡è¦åŠŸèƒ½ã€å…³é”®é—®é¢˜ |
| 5-6 | ä¸­ | å¸¸è§„åŠŸèƒ½ã€ä¸€èˆ¬çŸ¥è¯† |
| 1-4 | ä½ | ä¸´æ—¶ä¿¡æ¯ã€æ¬¡è¦ç»†èŠ‚ |

---

## ğŸ—„ï¸ æ•°æ®åº“è¡¨

| è¡¨å | ç”¨é€” |
|------|------|
| `project_memories` | è®°å¿†ä¸»è¡¨ |
| `memory_relations` | å…³ç³»è¡¨ |
| `memory_retrievals` | æ£€ç´¢å†å² |
| `memory_stats` | ç»Ÿè®¡è¡¨ |

---

## ğŸ”§ å¿«é€Ÿå¯åŠ¨

```bash
# 1. è¿è¡Œè¿ç§»
python database/migrations/migrate.py --apply 003_add_project_memories.sql

# 2. å¯åŠ¨API
cd apps/api
uvicorn main:app --reload --port 8870

# 3. æµ‹è¯•
curl http://localhost:8870/api/projects/TASKFLOW/memories/health
```

---

## ğŸ“š æ–‡æ¡£é“¾æ¥

- [å®Œæ•´æ–‡æ¡£](docs/features/PROJECT_MEMORY_SPACE.md) - 700è¡Œè¯¦ç»†è¯´æ˜
- [å¿«é€Ÿå…¥é—¨](docs/features/PROJECT_MEMORY_QUICKSTART.md) - 5åˆ†é’Ÿä¸Šæ‰‹
- [æµ‹è¯•](tests/test_project_memory_service.py) - 14ä¸ªæµ‹è¯•ç”¨ä¾‹

---

## ğŸ’¡ å…¸å‹åœºæ™¯

### æ–°æ¶æ„å¸ˆæ¥æ‰‹é¡¹ç›®

```bash
GET /api/projects/TASKFLOW/knowledge/inherit?context=åˆæ¬¡æ¥æ‰‹é¡¹ç›®&limit=20
# â†’ å¿«é€Ÿäº†è§£é¡¹ç›®å†å²å’Œå†³ç­–
```

### è®°å½•é‡è¦å†³ç­–

```python
service.auto_record_architecture_decision(
    project_id="TASKFLOW",
    title="é‡‡ç”¨å¾®æœåŠ¡",
    context="å•ä½“éš¾ä»¥æ‰©å±•",
    decision="æ‹†åˆ†ä¸ºå¤šä¸ªæœåŠ¡"
)
```

### é—®é¢˜æ’æŸ¥

```bash
GET /api/projects/TASKFLOW/memories?query=Tabåˆ‡æ¢å¤±è´¥&category=solution
# â†’ æ‰¾åˆ°å†å²è§£å†³æ–¹æ¡ˆ
```

---

**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2025-11-18  
**ç»´æŠ¤**: ä»»åŠ¡æ‰€Â·Flow Team

