# 📖 事件流可视化v2 - 快速使用指南

**REQ-010-E: Dashboard事件流可视化升级**

---

## 🚀 快速开始（3步）

### 第1步：启动Dashboard

```bash
cd taskflow-v1.7-monorepo
python apps/dashboard/start_dashboard.py
```

或使用快捷方式：
```bash
.\启动Dashboard.bat
```

### 第2步：打开浏览器

访问事件流页面：
```
http://127.0.0.1:8877/events
```

### 第3步：开始使用

页面加载后，您将看到：
- ✅ 实时事件流
- ✅ 统计卡片
- ✅ 筛选器
- ✅ 搜索框

---

## 🎯 5个常用场景

### 场景1：查看所有任务事件

1. 点击"分类"下拉框
2. 选择"任务 Task"
3. 自动刷新显示结果

**效果**：只显示任务类型的事件

---

### 场景2：搜索特定任务

1. 在搜索框输入任务ID，如：`REQ-010-E`
2. 实时筛选匹配的事件

**效果**：立即显示包含该关键词的所有事件

---

### 场景3：查看严重问题

1. 点击"严重性"下拉框
2. 选择"严重 Critical"

**效果**：只显示严重级别的事件（红色背景）

---

### 场景4：查看某个角色的活动

1. 点击"操作者"下拉框
2. 选择"AI Architect"

**效果**：显示该角色的所有事件

---

### 场景5：查看事件详情

1. 点击任意事件卡片
2. 卡片展开显示详细信息
3. 再次点击折叠

**效果**：查看事件的完整信息（ID、类型、数据等）

---

## 🎨 UI功能说明

### 页面顶部

```
📊 事件流 · Event Stream
REAL-TIME PROJECT ACTIVITY MONITOR
```
- 页面标题
- 说明这是实时项目活动监控

### 搜索栏

```
🔍 搜索事件标题或描述...
```
- 输入关键词实时搜索
- 搜索范围：标题和描述
- 300ms防抖，避免频繁请求

### 筛选器（5个）

```
[分类] [操作者] [严重性] [时间范围] [刷新按钮]
```

1. **分类**：task/issue/decision/deployment/system/general
2. **操作者**：动态加载所有角色
3. **严重性**：info/warning/error/critical
4. **时间范围**：1h/6h/24h/3d/7d/30d
5. **刷新按钮**：手动刷新事件流

### 统计卡片（5个）

```
[总事件] [任务] [问题] [严重] [已筛选]
```

- 实时显示项目统计
- 数字为48px大号字体
- 黑色粗体显示

### 事件卡片

```
┌─────────────────────────────────┐
│ 📌 任务创建: REQ-010-E          │  ← 标题
│ 新任务已创建，优先级P1          │  ← 描述
│ 👤 AI Architect | 🕐 5分钟前    │  ← 底部信息
│ [详情 Details]                  │  ← 展开按钮
│                                 │
│ ┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄   │
│ 事件ID: EVT-abc12345            │  ← 展开后显示
│ 事件类型: task.created          │
│ 项目ID: TASKFLOW                │
│ ...更多详情...                  │
└─────────────────────────────────┘
```

---

## 🎨 配色说明

### 事件分类配色（左边框）

- **蓝灰色** → 任务 Task
- **赤褐色** → 问题 Issue  
- **金棕色** → 决策 Decision
- **橄榄绿** → 部署 Deployment
- **灰蓝色** → 系统 System
- **中灰色** → 常规 General

### 严重性配色（背景色）

- **红色背景** → 严重 Critical (⚠️ 需立即处理)
- **橙色背景** → 错误 Error
- **黄色背景** → 警告 Warning
- **白色背景** → 信息 Info

---

## ⚡ 快捷操作

| 操作 | 方法 | 快捷键 |
|------|------|--------|
| 搜索事件 | 在搜索框输入 | - |
| 展开详情 | 点击卡片 | - |
| 手动刷新 | 点击刷新按钮 | - |
| 清除筛选 | 选择"全部 All" | - |
| 查看更多 | 滚动到底部 | - |

---

## 📊 统计说明

### 总事件
项目的所有历史事件数量

### 任务
category="task"的事件数量

### 问题
category="issue"的事件数量

### 严重
severity="critical"的事件数量

### 已筛选
当前筛选和搜索后的结果数量

---

## 🔄 自动刷新

**刷新间隔**: 5秒

**刷新内容**:
- 事件列表
- 统计数据
- 操作者列表（当时间范围改变时）

**刷新指示器**:
```
就绪        → 等待下次刷新
⟳ 刷新中... → 正在加载数据
错误        → 加载失败
```

---

## 💡 使用技巧

### 技巧1：组合筛选

同时使用多个筛选器，精确定位事件：

```
分类: 任务
操作者: AI Architect
严重性: 全部
时间: 24小时
```

**结果**：显示架构师在最近24小时创建的所有任务

---

### 技巧2：快速搜索

直接在搜索框输入关键词，无需点击筛选器：

```
搜索: REQ-010
```

**结果**：立即显示所有包含"REQ-010"的事件

---

### 技巧3：查看历史趋势

改变时间范围，对比不同时期的活动：

```
1小时   → 实时活动
24小时  → 今日活动
7天     → 本周趋势
30天    → 月度总览
```

---

### 技巧4：关注严重问题

筛选严重事件，优先处理：

```
严重性: 严重 Critical
```

**结果**：只显示需要立即处理的严重问题

---

### 技巧5：追踪某个任务

使用搜索和详情展开：

```
1. 搜索: REQ-010-E
2. 点击展开第一个事件
3. 查看完整信息
```

**结果**：了解任务的所有相关事件

---

## 🐛 常见问题

### Q1: 为什么看不到任何事件？

**A**: 可能的原因：
1. 时间范围太短（试试选择"7天"）
2. 筛选条件太严格（试试选择"全部"）
3. 项目还没有事件（需要先创建事件）

---

### Q2: 搜索没有结果？

**A**: 检查：
1. 关键词拼写是否正确
2. 是否使用了正确的事件ID
3. 该事件是否在当前时间范围内

---

### Q3: 页面加载很慢？

**A**: 优化建议：
1. 减小时间范围（如24小时 → 1小时）
2. 使用筛选器减少结果数量
3. 清理浏览器缓存
4. 检查网络连接

---

### Q4: 如何查看事件的JSON数据？

**A**: 
1. 点击事件卡片展开
2. 滚动到底部
3. 查看"事件数据"区域的JSON格式内容

---

### Q5: 自动刷新可以关闭吗？

**A**: 
目前自动刷新是默认启用的，5秒刷新一次。如需关闭，可以在开发者工具的Console中执行：
```javascript
stopAutoRefresh()
```

---

## 📱 响应式设计

### 桌面端（推荐）

- 显示所有筛选器
- 5个统计卡片并排
- 最佳体验

### 平板端

- 筛选器2列显示
- 统计卡片2x3布局
- 体验良好

### 移动端

- 筛选器1列显示
- 统计卡片2x2+1布局
- 基本可用

---

## 🎯 最佳实践

### 1. 定期监控

每天查看事件流，了解项目活动

### 2. 关注严重问题

优先查看"严重"级别的事件

### 3. 追踪任务进度

搜索特定任务ID，查看相关事件

### 4. 分析操作者活动

筛选不同角色，了解团队协作

### 5. 记录重要决策

展开"决策"类事件，查看架构决策

---

## 🔗 相关链接

- **主Dashboard**: http://127.0.0.1:8877
- **事件流页面**: http://127.0.0.1:8877/events
- **API文档**: http://127.0.0.1:8877/docs
- **健康检查**: http://127.0.0.1:8877/health

---

## 📞 获取帮助

如遇问题，请：

1. 查看完整文档：`✅REQ-010-E-完成报告.md`
2. 运行测试脚本：`python tests/test_event_stream_v2.py`
3. 查看开发者工具Console的错误信息
4. 联系开发团队

---

## 🎉 享受使用！

事件流可视化v2提供了强大而美观的事件监控体验。

**核心优势**:
- ✅ 实时刷新（5秒）
- ✅ 多维度筛选
- ✅ 实时搜索
- ✅ 详情展开
- ✅ 工业美学
- ✅ 高性能（A级）

**立即开始**: http://127.0.0.1:8877/events

---

**版本**: v2.0  
**更新日期**: 2025-11-18  
**状态**: ✅ 可用

🌟 **祝使用愉快！**

